{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tyler\\\\Downloads\\\\PrecisionTracker-v4-wired\\\\PrecisionTracker\\\\mobile\\\\App.js\";\nimport React, { useEffect, useState, createContext, useContext, useRef, useCallback } from 'react';\nimport { NavigationContainer, useFocusEffect } from '@react-navigation/native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport * as ImagePicker from 'expo-image-picker';\nimport * as FileSystem from 'expo-file-system';\nimport * as SQLite from 'expo-sqlite';\nimport Svg, { Path } from 'react-native-svg';\nimport ViewShot from 'react-native-view-shot';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport View from \"react-native-web/dist/exports/View\";\nimport * as SecureStore from 'expo-secure-store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.EXPO_PUBLIC_API_URL || 'http://localhost:4000';\nfunction initOfflineTables(database) {\n  try {\n    if (!database || typeof database.transaction !== 'function') return;\n    database.transaction(tx => {\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS queue (id INTEGER PRIMARY KEY AUTOINCREMENT, type TEXT, payload TEXT);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS uploads (id INTEGER PRIMARY KEY AUTOINCREMENT, dataUrl TEXT);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS leads_cache (id INTEGER PRIMARY KEY, description TEXT, status TEXT);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS jobs_cache (id INTEGER PRIMARY KEY, name TEXT, status TEXT, startDate TEXT, endDate TEXT, notes TEXT);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS tasks_cache (id INTEGER PRIMARY KEY, jobId INTEGER, title TEXT, status TEXT, dueDate TEXT);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS calendar_cache (id INTEGER PRIMARY KEY, jobId INTEGER, title TEXT, startAt TEXT, endAt TEXT);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS estimates_cache (id INTEGER PRIMARY KEY, leadId INTEGER, subtotal REAL, taxRate REAL, total REAL, status TEXT);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS estimate_items_cache (id INTEGER PRIMARY KEY, estimateId INTEGER, description TEXT, qty REAL, unitPrice REAL);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS change_orders_cache (id INTEGER PRIMARY KEY, jobId INTEGER, title TEXT, amountDelta REAL, status TEXT);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS users_cache (id INTEGER PRIMARY KEY, email TEXT, fullName TEXT, role TEXT);');\n    });\n  } catch (e) {}\n}\nlet db;\nexport function getDb() {\n  if (db) return db;\n  if (Platform.OS === 'web') {\n    db = {\n      transaction: fn => fn({\n        executeSql: () => {}\n      }),\n      execAsync: async () => {},\n      runAsync: async () => {}\n    };\n    return db;\n  }\n  if ('openDatabaseSync' in SQLite) {\n    db = SQLite.openDatabaseSync('offline.db');\n    return db;\n  }\n  if ('openDatabaseAsync' in SQLite) {\n    Alert.alert('Info', 'Using async SQLite; offline queue limited until refactor.');\n    db = {\n      transaction: fn => fn({\n        executeSql: () => {}\n      }),\n      execAsync: async () => {},\n      runAsync: async () => {}\n    };\n    return db;\n  }\n  db = {\n    transaction: fn => fn({\n      executeSql: () => {}\n    }),\n    execAsync: async () => {},\n    runAsync: async () => {}\n  };\n  return db;\n}\nconst dbHandle = getDb();\ninitOfflineTables(dbHandle);\nconst normalizeRole = role => {\n  if (!role) return 'TECH';\n  const r = String(role).toUpperCase();\n  if (['ADMIN', 'ESTIMATOR', 'SUPERVISOR', 'TECH'].includes(r)) return r;\n  if (r === 'STANDARD' || r === 'USER') return 'TECH';\n  return r;\n};\nconst AuthContext = createContext(null);\nfunction useAuth() {\n  return useContext(AuthContext);\n}\nasync function api(path, method = 'GET', body, token) {\n  const res = await fetch(`${API_URL}${path}`, {\n    method,\n    headers: Object.assign({\n      'Content-Type': 'application/json'\n    }, token ? {\n      Authorization: `Bearer ${token}`\n    } : {}),\n    body: body ? JSON.stringify(body) : undefined\n  });\n  if (!res.ok) {\n    throw new Error((await res.json()).error || 'Request failed');\n  }\n  return res.json();\n}\nfunction SignaturePad({\n  onCapturePng\n}) {\n  const [points, setPoints] = useState([]);\n  const [path, setPath] = useState('');\n  const shotRef = useRef(null);\n  return _jsxDEV(ViewShot, {\n    ref: shotRef,\n    options: {\n      format: 'png',\n      quality: 0.9,\n      result: 'base64'\n    },\n    style: {\n      height: 220,\n      borderWidth: 1,\n      backgroundColor: '#fff'\n    },\n    children: _jsxDEV(View, {\n      onStartShouldSetResponder: () => true,\n      onResponderMove: e => {\n        const x = e.nativeEvent.locationX,\n          y = e.nativeEvent.locationY;\n        setPath(p => p + (p ? ` L ${x} ${y}` : ` M ${x} ${y}`));\n      },\n      onResponderRelease: async () => {\n        const base64 = await shotRef.current.capture();\n        onCapturePng && onCapturePng('data:image/png;base64,' + base64);\n      },\n      style: {\n        flex: 1\n      },\n      children: _jsxDEV(Svg, {\n        height: \"100%\",\n        width: \"100%\",\n        children: _jsxDEV(Path, {\n          d: path,\n          stroke: \"black\",\n          strokeWidth: \"2\",\n          fill: \"none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\nfunction SignatureScreen({\n  route,\n  navigation\n}) {\n  const {\n    token\n  } = useAuth();\n  const {\n    estimateId\n  } = route.params;\n  const [sigPng, setSigPng] = useState(null);\n  const save = async () => {\n    if (!sigPng) {\n      Alert.alert('Please sign first');\n      return;\n    }\n    const resp = await api(`/estimates/${estimateId}/approve`, 'POST', {\n      signaturePngUrl: sigPng\n    }, token);\n    Alert.alert('Approved', `Payment link:\\n${resp && resp.paymentLink ? resp.paymentLink : 'Unavailable'}`);\n    navigation.goBack();\n  };\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      padding: 16\n    },\n    children: [_jsxDEV(Text, {\n      style: {\n        fontSize: 18,\n        marginBottom: 8\n      },\n      children: [\"Sign Estimate #\", estimateId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), _jsxDEV(SignaturePad, {\n      onCapturePng: setSigPng\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 12\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: \"Save Signature\",\n      onPress: save\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\nfunction UsersAdminScreen() {\n  const {\n    token\n  } = useAuth();\n  const [users, setUsers] = useState([]);\n  const [email, setEmail] = useState('');\n  const [fullName, setFullName] = useState('');\n  const [role, setRole] = useState('TECH');\n  const load = async () => setUsers(await api('/users', 'GET', null, token));\n  useEffect(() => {\n    load();\n  }, []);\n  const invite = async () => {\n    await api('/users', 'POST', {\n      email,\n      fullName,\n      role: normalizeRole(role)\n    }, token);\n    setEmail('');\n    setFullName('');\n    setRole('TECH');\n    load();\n  };\n  const promote = async (id, newRole) => {\n    await api(`/users/${id}`, 'PATCH', {\n      role: normalizeRole(newRole)\n    }, token);\n    load();\n  };\n  const remove = async id => {\n    Alert.alert('Delete user', 'Are you sure?', [{\n      text: 'Cancel',\n      style: 'cancel'\n    }, {\n      text: 'Delete',\n      style: 'destructive',\n      onPress: async () => {\n        await api(`/users/${id}`, 'DELETE', null, token);\n        load();\n      }\n    }]);\n  };\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      flex: 1,\n      padding: 16\n    },\n    children: [_jsxDEV(Text, {\n      style: {\n        fontSize: 18,\n        fontWeight: '600'\n      },\n      children: \"Invite User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      placeholder: \"Full name\",\n      value: fullName,\n      onChangeText: setFullName,\n      style: {\n        borderWidth: 1,\n        padding: 8,\n        marginVertical: 6\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      placeholder: \"Email\",\n      value: email,\n      onChangeText: setEmail,\n      autoCapitalize: \"none\",\n      style: {\n        borderWidth: 1,\n        padding: 8,\n        marginVertical: 6\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      placeholder: \"Role (ADMIN/ESTIMATOR/SUPERVISOR/TECH)\",\n      value: role,\n      onChangeText: setRole,\n      style: {\n        borderWidth: 1,\n        padding: 8,\n        marginVertical: 6\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: \"Create User\",\n      onPress: invite\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 16\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), _jsxDEV(FlatList, {\n      data: users,\n      keyExtractor: u => String(u.id),\n      renderItem: ({\n        item\n      }) => _jsxDEV(View, {\n        style: {\n          padding: 12,\n          borderWidth: 1,\n          marginBottom: 8\n        },\n        children: [_jsxDEV(Text, {\n          style: {\n            fontWeight: '600'\n          },\n          children: item.fullName || item.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          children: item.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          children: [\"Role: \", item.role]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), _jsxDEV(View, {\n          style: {\n            flexDirection: 'row',\n            gap: 8,\n            marginTop: 8,\n            flexWrap: 'wrap'\n          },\n          children: [_jsxDEV(Button, {\n            title: \"Admin\",\n            onPress: () => promote(item.id, 'ADMIN')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), _jsxDEV(Button, {\n            title: \"Estimator\",\n            onPress: () => promote(item.id, 'ESTIMATOR')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), _jsxDEV(Button, {\n            title: \"Supervisor\",\n            onPress: () => promote(item.id, 'SUPERVISOR')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), _jsxDEV(Button, {\n            title: \"Tech\",\n            onPress: () => promote(item.id, 'TECH')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: {\n              width: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), _jsxDEV(Button, {\n            title: \"Delete\",\n            color: \"#c00\",\n            onPress: () => remove(item.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n}\nfunction JobsKanbanScreen({\n  navigation\n}) {\n  const {\n    token\n  } = useAuth();\n  const [jobs, setJobs] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [newJobName, setNewJobName] = useState('');\n  const [newJobDate, setNewJobDate] = useState('');\n  const [newJobNotes, setNewJobNotes] = useState('');\n  const [showJobDetails, setShowJobDetails] = useState(false);\n  const [newCustomerName, setNewCustomerName] = useState('');\n  const [newCustomerPhone, setNewCustomerPhone] = useState('');\n  const [newCustomerEmail, setNewCustomerEmail] = useState('');\n  const [newAddressLine1, setNewAddressLine1] = useState('');\n  const [newAddressLine2, setNewAddressLine2] = useState('');\n  const [newCity, setNewCity] = useState('');\n  const [newStateCode, setNewStateCode] = useState('');\n  const [newZip, setNewZip] = useState('');\n  const load = useCallback(async () => {\n    setLoading(true);\n    try {\n      const data = await api('/jobs', 'GET', null, token);\n      setJobs(data);\n      db.transaction(tx => {\n        tx.executeSql('DELETE FROM jobs_cache;');\n        data.forEach(j => tx.executeSql('INSERT OR REPLACE INTO jobs_cache (id, name, status, startDate, endDate, notes) VALUES (?,?,?,?,?,?)', [j.id, j.name || '', j.status || 'SCHEDULED', j.startDate || '', j.endDate || '', j.notes || '']));\n      });\n    } catch (e) {\n      db.transaction(tx => tx.executeSql('SELECT id, name, status, startDate, endDate, notes FROM jobs_cache', [], (_, {\n        rows\n      }) => setJobs(rows._array || [])));\n    } finally {\n      setLoading(false);\n    }\n  }, [token]);\n  useFocusEffect(useCallback(() => {\n    load();\n  }, [load]));\n  const resetForm = () => {\n    setNewJobName('');\n    setNewJobDate('');\n    setNewJobNotes('');\n    setNewCustomerName('');\n    setNewCustomerPhone('');\n    setNewCustomerEmail('');\n    setNewAddressLine1('');\n    setNewAddressLine2('');\n    setNewCity('');\n    setNewStateCode('');\n    setNewZip('');\n  };\n  const createJob = async () => {\n    if (!newJobName.trim()) {\n      Alert.alert('Missing info', 'Please add a job name.');\n      return;\n    }\n    const hasCustomer = [newCustomerName, newCustomerPhone, newCustomerEmail].some(v => v && v.trim());\n    const hasAddress = [newAddressLine1, newCity, newStateCode, newZip].some(v => v && v.trim());\n    const payload = {\n      name: newJobName.trim(),\n      status: 'SCHEDULED',\n      startDate: newJobDate || null,\n      notes: newJobNotes.trim() || null\n    };\n    if (hasCustomer) {\n      payload.customer = {\n        name: newCustomerName.trim(),\n        phone: newCustomerPhone.trim(),\n        email: newCustomerEmail.trim(),\n        billingAddress: newAddressLine1 ? `${newAddressLine1}${newAddressLine2 ? `\\n${newAddressLine2}` : ''}${newCity ? `\\n${newCity}, ${newStateCode} ${newZip}` : ''}` : null\n      };\n    }\n    if (hasAddress) {\n      payload.jobsite = {\n        addressLine1: newAddressLine1.trim(),\n        addressLine2: newAddressLine2.trim(),\n        city: newCity.trim(),\n        state: newStateCode.trim(),\n        zip: newZip.trim()\n      };\n    }\n    try {\n      const created = await api('/jobs', 'POST', payload, token);\n      setJobs(prev => [created, ...prev]);\n      resetForm();\n      Alert.alert('Job created', `Job #${created.id} ready to schedule.`);\n    } catch (e) {\n      Alert.alert('Error', e.message || 'Unable to create job');\n    }\n  };\n  const setStatus = async (id, status) => {\n    try {\n      const updated = await api(`/jobs/${id}`, 'PATCH', {\n        status\n      }, token);\n      setJobs(prev => prev.map(job => job.id === id ? updated : job));\n    } catch (e) {\n      Alert.alert('Error', e.message || 'Unable to update job status');\n    }\n  };\n  const removeJob = async id => {\n    Alert.alert('Delete Job', `Delete job #${id}?`, [{\n      text: 'Cancel',\n      style: 'cancel'\n    }, {\n      text: 'Delete',\n      style: 'destructive',\n      onPress: async () => {\n        try {\n          await api(`/jobs/${id}`, 'DELETE', null, token);\n          setJobs(prev => prev.filter(job => job.id !== id));\n        } catch (e) {\n          Alert.alert('Error', e.message || 'Unable to delete job');\n        }\n      }\n    }]);\n  };\n  const columns = ['SCHEDULED', 'IN_PROGRESS', 'ON_HOLD', 'DONE'];\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: [_jsxDEV(View, {\n      style: {\n        padding: 12,\n        borderBottomWidth: 1\n      },\n      children: [_jsxDEV(Text, {\n        style: {\n          fontWeight: '700',\n          marginBottom: 6\n        },\n        children: \"New Job\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          gap: 8,\n          alignItems: 'center'\n        },\n        children: [_jsxDEV(TextInput, {\n          placeholder: \"Job name\",\n          value: newJobName,\n          onChangeText: setNewJobName,\n          style: {\n            flex: 1,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"Start date (YYYY-MM-DD)\",\n          value: newJobDate,\n          onChangeText: setNewJobDate,\n          style: {\n            flex: 1,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), showJobDetails && _jsxDEV(View, {\n        style: {\n          marginTop: 12\n        },\n        children: [_jsxDEV(Text, {\n          style: {\n            fontWeight: '600',\n            marginBottom: 4\n          },\n          children: \"Notes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), _jsxDEV(TextInput, {\n          value: newJobNotes,\n          onChangeText: setNewJobNotes,\n          placeholder: \"Internal notes\",\n          multiline: true,\n          style: {\n            borderWidth: 1,\n            padding: 8,\n            minHeight: 60,\n            marginBottom: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          style: {\n            fontWeight: '600',\n            marginBottom: 4\n          },\n          children: \"Customer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"Name\",\n          value: newCustomerName,\n          onChangeText: setNewCustomerName,\n          style: {\n            borderWidth: 1,\n            padding: 8,\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"Phone\",\n          value: newCustomerPhone,\n          onChangeText: setNewCustomerPhone,\n          keyboardType: \"phone-pad\",\n          style: {\n            borderWidth: 1,\n            padding: 8,\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"Email\",\n          value: newCustomerEmail,\n          onChangeText: setNewCustomerEmail,\n          keyboardType: \"email-address\",\n          style: {\n            borderWidth: 1,\n            padding: 8,\n            marginBottom: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          style: {\n            fontWeight: '600',\n            marginBottom: 4\n          },\n          children: \"Job Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"Address line 1\",\n          value: newAddressLine1,\n          onChangeText: setNewAddressLine1,\n          style: {\n            borderWidth: 1,\n            padding: 8,\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"Address line 2\",\n          value: newAddressLine2,\n          onChangeText: setNewAddressLine2,\n          style: {\n            borderWidth: 1,\n            padding: 8,\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this), _jsxDEV(View, {\n          style: {\n            flexDirection: 'row',\n            gap: 8\n          },\n          children: [_jsxDEV(TextInput, {\n            placeholder: \"City\",\n            value: newCity,\n            onChangeText: setNewCity,\n            style: {\n              flex: 1,\n              borderWidth: 1,\n              padding: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 15\n          }, this), _jsxDEV(TextInput, {\n            placeholder: \"State\",\n            value: newStateCode,\n            onChangeText: setNewStateCode,\n            style: {\n              width: 80,\n              borderWidth: 1,\n              padding: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this), _jsxDEV(TextInput, {\n            placeholder: \"ZIP\",\n            value: newZip,\n            onChangeText: setNewZip,\n            style: {\n              width: 100,\n              borderWidth: 1,\n              padding: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginTop: 12\n        },\n        children: [_jsxDEV(TouchableOpacity, {\n          onPress: () => setShowJobDetails(v => !v),\n          children: _jsxDEV(Text, {\n            style: {\n              color: '#007AFF'\n            },\n            children: showJobDetails ? 'Hide details' : 'Add customer & address'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), _jsxDEV(Button, {\n          title: \"Create\",\n          onPress: createJob\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), loading && _jsxDEV(Text, {\n        style: {\n          marginTop: 8\n        },\n        children: \"Refreshing jobs\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }, this), _jsxDEV(ScrollView, {\n      horizontal: true,\n      contentContainerStyle: {\n        padding: 12\n      },\n      children: columns.map(col => _jsxDEV(View, {\n        style: {\n          width: 300,\n          marginRight: 12\n        },\n        children: [_jsxDEV(Text, {\n          style: {\n            fontWeight: '700',\n            marginBottom: 8\n          },\n          children: col\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this), jobs.filter(j => j.status === col).map(j => _jsxDEV(TouchableOpacity, {\n          style: {\n            borderWidth: 1,\n            padding: 10,\n            borderRadius: 8,\n            marginBottom: 8\n          },\n          onPress: () => navigation.navigate('JobDetail', {\n            jobId: j.id\n          }),\n          children: [_jsxDEV(Text, {\n            style: {\n              fontWeight: '600'\n            },\n            children: j.name || `Job #${j.id}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 17\n          }, this), _jsxDEV(Text, {\n            children: [\"#\", j.id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 17\n          }, this), _jsxDEV(View, {\n            style: {\n              height: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 17\n          }, this), _jsxDEV(View, {\n            style: {\n              flexDirection: 'row',\n              flexWrap: 'wrap',\n              gap: 6\n            },\n            children: [_jsxDEV(Button, {\n              title: \"In Progress\",\n              onPress: () => setStatus(j.id, 'IN_PROGRESS')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 19\n            }, this), _jsxDEV(Button, {\n              title: \"On Hold\",\n              onPress: () => setStatus(j.id, 'ON_HOLD')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 19\n            }, this), _jsxDEV(Button, {\n              title: \"Done\",\n              onPress: () => setStatus(j.id, 'DONE')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 19\n            }, this), _jsxDEV(Button, {\n              title: \"Delete\",\n              color: \"#c00\",\n              onPress: () => removeJob(j.id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 17\n          }, this)]\n        }, j.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 15\n        }, this))]\n      }, col, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 321,\n    columnNumber: 5\n  }, this);\n}\nfunction JobDetailScreen({\n  route\n}) {\n  const {\n    jobId\n  } = route.params;\n  const {\n    token,\n    user\n  } = useAuth();\n  const [jobName, setJobName] = useState('');\n  const [jobStartDate, setJobStartDate] = useState('');\n  const [jobEndDate, setJobEndDate] = useState('');\n  const [jobNotes, setJobNotes] = useState('');\n  const [jobCustomerName, setJobCustomerName] = useState('');\n  const [jobCustomerPhone, setJobCustomerPhone] = useState('');\n  const [jobCustomerEmail, setJobCustomerEmail] = useState('');\n  const [jobAddressLine1, setJobAddressLine1] = useState('');\n  const [jobAddressLine2, setJobAddressLine2] = useState('');\n  const [jobCity, setJobCity] = useState('');\n  const [jobStateCode, setJobStateCode] = useState('');\n  const [jobZip, setJobZip] = useState('');\n  const [changeOrders, setCO] = useState([]);\n  const [title, setTitle] = useState('');\n  const [amountDelta, setAmountDelta] = useState('0');\n  const loadCO = useCallback(async () => {\n    setCO(await api(`/change-orders/job/${jobId}`, 'GET', null, token));\n  }, [jobId, token]);\n  const loadJob = useCallback(async () => {\n    try {\n      const j = await api(`/jobs/${jobId}`, 'GET', null, token);\n      setJobName(j.name || '');\n      setJobStartDate(j.startDate || '');\n      setJobEndDate(j.endDate || '');\n      setJobNotes(j.notes || '');\n      const customer = j.Customer || {};\n      const jobsite = j.Jobsite || {};\n      setJobCustomerName(customer.name || '');\n      setJobCustomerPhone(customer.phone || '');\n      setJobCustomerEmail(customer.email || '');\n      setJobAddressLine1(jobsite.addressLine1 || '');\n      setJobAddressLine2(jobsite.addressLine2 || '');\n      setJobCity(jobsite.city || '');\n      setJobStateCode(jobsite.state || '');\n      setJobZip(jobsite.zip || '');\n    } catch (e) {}\n  }, [jobId, token]);\n  useEffect(() => {\n    loadJob();\n    loadCO();\n  }, [loadJob, loadCO]);\n  const addCO = async () => {\n    if (!title.trim()) {\n      Alert.alert('Missing info', 'Add a title for the change order.');\n      return;\n    }\n    await api(`/change-orders/job/${jobId}`, 'POST', {\n      title: title.trim(),\n      amountDelta: parseFloat(amountDelta) || 0\n    }, token);\n    setTitle('');\n    setAmountDelta('0');\n    loadCO();\n  };\n  const saveJobDetails = async () => {\n    try {\n      await api(`/jobs/${jobId}`, 'PATCH', {\n        name: jobName,\n        startDate: jobStartDate || null,\n        endDate: jobEndDate || null,\n        notes: jobNotes,\n        customer: {\n          name: jobCustomerName,\n          phone: jobCustomerPhone,\n          email: jobCustomerEmail,\n          billingAddress: jobAddressLine1 ? `${jobAddressLine1}${jobAddressLine2 ? `\\n${jobAddressLine2}` : ''}${jobCity ? `\\n${jobCity}, ${jobStateCode} ${jobZip}` : ''}` : null\n        },\n        jobsite: {\n          addressLine1: jobAddressLine1,\n          addressLine2: jobAddressLine2,\n          city: jobCity,\n          state: jobStateCode,\n          zip: jobZip\n        }\n      }, token);\n      Alert.alert('Saved', 'Job details updated.');\n      loadJob();\n    } catch (e) {\n      Alert.alert('Error', e.message || 'Unable to save job');\n    }\n  };\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: _jsxDEV(ScrollView, {\n      contentContainerStyle: {\n        padding: 16,\n        paddingBottom: 32\n      },\n      children: [_jsxDEV(Text, {\n        style: {\n          fontSize: 18,\n          fontWeight: '600',\n          marginBottom: 8\n        },\n        children: [\"Job #\", jobId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginBottom: 6\n        },\n        children: \"Job Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Job name\",\n        value: jobName,\n        onChangeText: setJobName,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          gap: 8\n        },\n        children: [_jsxDEV(TextInput, {\n          placeholder: \"Start date (YYYY-MM-DD)\",\n          value: jobStartDate,\n          onChangeText: setJobStartDate,\n          style: {\n            flex: 1,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"End date (YYYY-MM-DD)\",\n          value: jobEndDate,\n          onChangeText: setJobEndDate,\n          style: {\n            flex: 1,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Notes / scope\",\n        value: jobNotes,\n        onChangeText: setJobNotes,\n        multiline: true,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginTop: 6,\n          minHeight: 80\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginTop: 16\n        },\n        children: \"Customer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Name\",\n        value: jobCustomerName,\n        onChangeText: setJobCustomerName,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Phone\",\n        value: jobCustomerPhone,\n        onChangeText: setJobCustomerPhone,\n        keyboardType: \"phone-pad\",\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Email\",\n        value: jobCustomerEmail,\n        onChangeText: setJobCustomerEmail,\n        keyboardType: \"email-address\",\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginTop: 16\n        },\n        children: \"Job Address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Address line 1\",\n        value: jobAddressLine1,\n        onChangeText: setJobAddressLine1,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Address line 2\",\n        value: jobAddressLine2,\n        onChangeText: setJobAddressLine2,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          gap: 8\n        },\n        children: [_jsxDEV(TextInput, {\n          placeholder: \"City\",\n          value: jobCity,\n          onChangeText: setJobCity,\n          style: {\n            flex: 1,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 11\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"State\",\n          value: jobStateCode,\n          onChangeText: setJobStateCode,\n          style: {\n            width: 80,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"ZIP\",\n          value: jobZip,\n          onChangeText: setJobZip,\n          style: {\n            width: 100,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          marginTop: 12\n        },\n        children: _jsxDEV(Button, {\n          title: \"Save details\",\n          onPress: saveJobDetails\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this), (user?.role === 'ADMIN' || user?.role === 'SUPERVISOR' || user?.role === 'ESTIMATOR') && _jsxDEV(View, {\n        style: {\n          marginVertical: 16\n        },\n        children: [_jsxDEV(Text, {\n          style: {\n            fontWeight: '600'\n          },\n          children: \"New Change Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 13\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"Title\",\n          value: title,\n          onChangeText: setTitle,\n          style: {\n            borderWidth: 1,\n            padding: 8,\n            marginVertical: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"Amount $\",\n          value: amountDelta,\n          onChangeText: setAmountDelta,\n          keyboardType: \"decimal-pad\",\n          style: {\n            borderWidth: 1,\n            padding: 8,\n            marginVertical: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this), _jsxDEV(Button, {\n          title: \"Add Change Order\",\n          onPress: addCO\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 11\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginTop: 12\n        },\n        children: \"Change Orders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 9\n      }, this), changeOrders.length === 0 ? _jsxDEV(Text, {\n        style: {\n          marginVertical: 6\n        },\n        children: \"No change orders yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 11\n      }, this) : changeOrders.map(item => _jsxDEV(View, {\n        style: {\n          borderWidth: 1,\n          padding: 10,\n          borderRadius: 8,\n          marginVertical: 6\n        },\n        children: [_jsxDEV(Text, {\n          style: {\n            fontWeight: '600'\n          },\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          children: [\"Status: \", item.status, \" | $\", item.amountDelta]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this), (user?.role === 'ADMIN' || user?.role === 'SUPERVISOR' || user?.role === 'ESTIMATOR') && _jsxDEV(View, {\n          style: {\n            flexDirection: 'row',\n            gap: 8,\n            marginTop: 8\n          },\n          children: [_jsxDEV(Button, {\n            title: \"Approve\",\n            onPress: async () => {\n              await api(`/change-orders/${item.id}`, 'PATCH', {\n                status: 'APPROVED'\n              }, token);\n              loadCO();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 17\n          }, this), _jsxDEV(Button, {\n            title: \"Reject\",\n            onPress: async () => {\n              await api(`/change-orders/${item.id}`, 'PATCH', {\n                status: 'REJECTED'\n              }, token);\n              loadCO();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 15\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 11\n      }, this)), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginTop: 16\n        },\n        children: \"Tasks\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, this), _jsxDEV(JobTasks, {\n        jobId: jobId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginTop: 16\n        },\n        children: \"Schedule\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 9\n      }, this), _jsxDEV(JobSchedule, {\n        jobId: jobId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 455,\n    columnNumber: 5\n  }, this);\n}\nfunction JobTasks({\n  jobId\n}) {\n  const {\n    token\n  } = useAuth();\n  const [tasks, setTasks] = useState([]);\n  const [title, setTitle] = useState('');\n  const [dueDate, setDueDate] = useState('');\n  const load = async () => {\n    try {\n      const data = await api(`/tasks?jobId=${jobId}`, 'GET', null, token);\n      setTasks(data);\n      db.transaction(tx => {\n        tx.executeSql('DELETE FROM tasks_cache WHERE jobId=?', [jobId]);\n        data.forEach(t => tx.executeSql('INSERT OR REPLACE INTO tasks_cache (id, jobId, title, status, dueDate) VALUES (?,?,?,?,?)', [t.id, jobId, t.title || '', t.status || 'TODO', t.dueDate || '']));\n      });\n    } catch (e) {\n      db.transaction(tx => tx.executeSql('SELECT id, jobId, title, status, dueDate FROM tasks_cache WHERE jobId=?', [jobId], (_, {\n        rows\n      }) => setTasks(rows._array || [])));\n    }\n  };\n  useEffect(() => {\n    load();\n  }, []);\n  const add = async () => {\n    if (!title.trim()) return Alert.alert('Title required');\n    await api('/tasks', 'POST', {\n      title,\n      jobId,\n      dueDate\n    }, token);\n    setTitle('');\n    setDueDate('');\n    load();\n  };\n  const done = async id => {\n    await api(`/tasks/${id}`, 'PATCH', {\n      status: 'DONE'\n    }, token);\n    load();\n  };\n  const remove = async id => {\n    await api(`/tasks/${id}`, 'DELETE', null, token);\n    load();\n  };\n  return _jsxDEV(View, {\n    children: [_jsxDEV(View, {\n      style: {\n        flexDirection: 'row',\n        gap: 8,\n        marginVertical: 8\n      },\n      children: [_jsxDEV(TextInput, {\n        placeholder: \"Task title\",\n        value: title,\n        onChangeText: setTitle,\n        style: {\n          flex: 1,\n          borderWidth: 1,\n          padding: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Due YYYY-MM-DD\",\n        value: dueDate,\n        onChangeText: setDueDate,\n        style: {\n          width: 140,\n          borderWidth: 1,\n          padding: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 9\n      }, this), _jsxDEV(Button, {\n        title: \"Add\",\n        onPress: add\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 7\n    }, this), tasks.map(t => _jsxDEV(View, {\n      style: {\n        borderWidth: 1,\n        padding: 10,\n        borderRadius: 8,\n        marginVertical: 6\n      },\n      children: [_jsxDEV(Text, {\n        style: {\n          fontWeight: '600'\n        },\n        children: t.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 11\n      }, this), _jsxDEV(Text, {\n        children: [\"Due: \", t.dueDate || '-', \" | Status: \", t.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 11\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          gap: 8,\n          marginTop: 6\n        },\n        children: [_jsxDEV(Button, {\n          title: \"Mark Done\",\n          onPress: () => done(t.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 13\n        }, this), _jsxDEV(Button, {\n          title: \"Delete\",\n          color: \"#c00\",\n          onPress: () => remove(t.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 11\n      }, this)]\n    }, t.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 543,\n    columnNumber: 5\n  }, this);\n}\nfunction JobSchedule({\n  jobId\n}) {\n  const {\n    token\n  } = useAuth();\n  const [events, setEvents] = useState([]);\n  const [title, setTitle] = useState('');\n  const [startAt, setStartAt] = useState('');\n  const [endAt, setEndAt] = useState('');\n  const load = async () => {\n    try {\n      const data = await api(`/calendar?jobId=${jobId}`, 'GET', null, token);\n      setEvents(data);\n      db.transaction(tx => {\n        tx.executeSql('DELETE FROM calendar_cache WHERE jobId=?', [jobId]);\n        data.forEach(ev => tx.executeSql('INSERT OR REPLACE INTO calendar_cache (id, jobId, title, startAt, endAt) VALUES (?,?,?,?,?)', [ev.id, jobId, ev.title || '', ev.startAt || '', ev.endAt || '']));\n      });\n    } catch (e) {\n      db.transaction(tx => tx.executeSql('SELECT id, jobId, title, startAt, endAt FROM calendar_cache WHERE jobId=?', [jobId], (_, {\n        rows\n      }) => setEvents(rows._array || [])));\n    }\n  };\n  useEffect(() => {\n    load();\n  }, []);\n  const add = async () => {\n    if (!title.trim() || !startAt) return Alert.alert('Title and start time required');\n    await api('/calendar', 'POST', {\n      title,\n      jobId,\n      startAt,\n      endAt\n    }, token);\n    setTitle('');\n    setStartAt('');\n    setEndAt('');\n    load();\n  };\n  const remove = async id => {\n    await api(`/calendar/${id}`, 'DELETE', null, token);\n    load();\n  };\n  return _jsxDEV(View, {\n    children: [_jsxDEV(View, {\n      style: {\n        marginVertical: 8\n      },\n      children: [_jsxDEV(TextInput, {\n        placeholder: \"Event title\",\n        value: title,\n        onChangeText: setTitle,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Start (YYYY-MM-DDTHH:mm:ssZ)\",\n        value: startAt,\n        onChangeText: setStartAt,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"End (YYYY-MM-DDTHH:mm:ssZ)\",\n        value: endAt,\n        onChangeText: setEndAt,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 9\n      }, this), _jsxDEV(Button, {\n        title: \"Add Event\",\n        onPress: add\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 7\n    }, this), events.map(ev => _jsxDEV(View, {\n      style: {\n        borderWidth: 1,\n        padding: 10,\n        borderRadius: 8,\n        marginVertical: 6\n      },\n      children: [_jsxDEV(Text, {\n        style: {\n          fontWeight: '600'\n        },\n        children: ev.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 11\n      }, this), _jsxDEV(Text, {\n        children: [ev.startAt, \" -> \", ev.endAt || '-']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 11\n      }, this), _jsxDEV(Button, {\n        title: \"Delete\",\n        color: \"#c00\",\n        onPress: () => remove(ev.id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 11\n      }, this)]\n    }, ev.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 589,\n    columnNumber: 5\n  }, this);\n}\nasync function processQueue(token) {\n  return new Promise(resolve => {\n    db.transaction(tx => {\n      tx.executeSql('SELECT * FROM queue', [], async (_, {\n        rows\n      }) => {\n        const items = rows._array || [];\n        for (const q of items) {\n          try {\n            const payload = JSON.parse(q.payload);\n            if (q.type === 'createLead') {\n              await api('/leads', 'POST', payload, token);\n            }\n            if (q.type === 'uploadPhoto') {\n              await api('/upload/image', 'POST', {\n                dataUrl: payload.dataUrl\n              }, token);\n            }\n            db.transaction(txx => txx.executeSql('DELETE FROM queue WHERE id=?', [q.id]));\n          } catch (e) {}\n        }\n        resolve();\n      });\n    });\n  });\n}\nfunction LeadsScreen({\n  navigation\n}) {\n  const {\n    token\n  } = useAuth();\n  const [leads, setLeads] = useState([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const fetchLeads = async () => {\n    try {\n      const data = await api('/leads', 'GET', null, token);\n      setLeads(data);\n      db.transaction(tx => {\n        tx.executeSql('DELETE FROM leads_cache;');\n        data.forEach(l => tx.executeSql('INSERT OR REPLACE INTO leads_cache (id, description, status) VALUES (?,?,?)', [l.id, l.description || '', l.status || 'NEW']));\n      });\n    } catch (e) {\n      db.transaction(tx => tx.executeSql('SELECT id, description, status FROM leads_cache', [], (_, {\n        rows\n      }) => setLeads(rows._array || [])));\n    }\n  };\n  useFocusEffect(useCallback(() => {\n    fetchLeads();\n  }, [token]));\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await fetchLeads();\n    setRefreshing(false);\n  };\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: _jsxDEV(FlatList, {\n      data: leads,\n      keyExtractor: item => String(item.id),\n      contentContainerStyle: {\n        padding: 12\n      },\n      refreshControl: _jsxDEV(RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: onRefresh\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 25\n      }, this),\n      renderItem: ({\n        item\n      }) => _jsxDEV(TouchableOpacity, {\n        style: {\n          padding: 12,\n          borderWidth: 1,\n          marginBottom: 8\n        },\n        onPress: () => navigation.navigate('EstimateEditor', {\n          leadId: item.id\n        }),\n        children: [_jsxDEV(Text, {\n          style: {\n            fontWeight: '600'\n          },\n          children: [\"Lead #\", item.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          children: [\"Status: \", item.status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 13\n        }, this), item.Customer?.name ? _jsxDEV(Text, {\n          children: [\"Customer: \", item.Customer.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 36\n        }, this) : null, item.Customer?.phone ? _jsxDEV(Text, {\n          children: [\"Phone: \", item.Customer.phone]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 37\n        }, this) : null, item.Customer?.email ? _jsxDEV(Text, {\n          children: [\"Email: \", item.Customer.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 37\n        }, this) : null, _jsxDEV(Text, {\n          numberOfLines: 3,\n          style: {\n            marginTop: 4\n          },\n          children: item.description || 'No description yet.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 13\n        }, this), item.Jobsite && (item.Jobsite.addressLine1 || item.Jobsite.city) ? _jsxDEV(Text, {\n          style: {\n            marginTop: 4,\n            color: '#555'\n          },\n          children: `${item.Jobsite.addressLine1 || ''}${item.Jobsite.addressLine2 ? `, ${item.Jobsite.addressLine2}` : ''}${item.Jobsite.city ? ` • ${item.Jobsite.city}${item.Jobsite.state ? `, ${item.Jobsite.state}` : ''}` : ''}${item.Jobsite.zip ? ` ${item.Jobsite.zip}` : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 15\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 11\n      }, this),\n      ListHeaderComponent: _jsxDEV(Button, {\n        title: \"New Lead\",\n        onPress: () => navigation.navigate('NewLead')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 30\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 652,\n    columnNumber: 5\n  }, this);\n}\nfunction NewLeadScreen({\n  navigation\n}) {\n  const {\n    token\n  } = useAuth();\n  const [description, setDescription] = useState('');\n  const [status, setStatus] = useState('NEW');\n  const [customerName, setCustomerName] = useState('');\n  const [customerPhone, setCustomerPhone] = useState('');\n  const [customerEmail, setCustomerEmail] = useState('');\n  const [addressLine1, setAddressLine1] = useState('');\n  const [addressLine2, setAddressLine2] = useState('');\n  const [city, setCity] = useState('');\n  const [stateCode, setStateCode] = useState('');\n  const [zip, setZip] = useState('');\n  const statuses = ['NEW', 'CONTACTED', 'ESTIMATING', 'CONVERTED', 'CLOSED_LOST'];\n  const buildPayload = () => {\n    const customer = [customerName, customerPhone, customerEmail].some(v => v && v.trim()) ? {\n      name: customerName.trim(),\n      phone: customerPhone.trim(),\n      email: customerEmail.trim()\n    } : null;\n    const jobsite = [addressLine1, addressLine2, city, stateCode, zip].some(v => v && v.trim()) ? {\n      addressLine1: addressLine1.trim(),\n      addressLine2: addressLine2.trim(),\n      city: city.trim(),\n      state: stateCode.trim(),\n      zip: zip.trim()\n    } : null;\n    return {\n      description,\n      status,\n      customer,\n      jobsite\n    };\n  };\n  const createLeadOnline = async () => {\n    const payload = buildPayload();\n    const created = await api('/leads', 'POST', payload, token);\n    Alert.alert('Lead created', `Lead #${created.id} saved`, [{\n      text: 'View estimate',\n      onPress: () => navigation.replace('EstimateEditor', {\n        leadId: created.id\n      })\n    }, {\n      text: 'Back to leads',\n      onPress: () => navigation.goBack()\n    }]);\n  };\n  const queueLead = () => {\n    const payload = buildPayload();\n    db.transaction(tx => tx.executeSql('INSERT INTO queue (type, payload) VALUES (?,?)', ['createLead', JSON.stringify(payload)]));\n    Alert.alert('Saved offline', 'We will submit this lead when you reconnect.');\n    navigation.goBack();\n  };\n  const submit = async () => {\n    if (!description.trim()) {\n      Alert.alert('Missing scope', 'Please describe the job or scope of work.');\n      return;\n    }\n    try {\n      await createLeadOnline();\n    } catch (e) {\n      queueLead();\n    }\n  };\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: _jsxDEV(ScrollView, {\n      contentContainerStyle: {\n        padding: 16,\n        paddingBottom: 32\n      },\n      children: [_jsxDEV(Text, {\n        style: {\n          fontSize: 18,\n          marginBottom: 8\n        },\n        children: \"New Lead\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 749,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginBottom: 6\n        },\n        children: \"Scope / Notes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 750,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Describe the job...\",\n        value: description,\n        onChangeText: setDescription,\n        multiline: true,\n        style: {\n          borderWidth: 1,\n          minHeight: 120,\n          padding: 10,\n          marginBottom: 12\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginBottom: 6\n        },\n        children: \"Lead status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 758,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          flexWrap: 'wrap',\n          gap: 8,\n          marginBottom: 12\n        },\n        children: statuses.map(s => _jsxDEV(TouchableOpacity, {\n          onPress: () => setStatus(s),\n          style: {\n            paddingVertical: 6,\n            paddingHorizontal: 12,\n            borderRadius: 16,\n            borderWidth: 1,\n            borderColor: status === s ? '#007AFF' : '#ccc',\n            backgroundColor: status === s ? '#E6F0FF' : '#fff'\n          },\n          children: _jsxDEV(Text, {\n            style: {\n              color: status === s ? '#007AFF' : '#333'\n            },\n            children: s\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 773,\n            columnNumber: 15\n          }, this)\n        }, s, false, {\n          fileName: _jsxFileName,\n          lineNumber: 761,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 759,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginBottom: 6\n        },\n        children: \"Customer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 778,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Name\",\n        value: customerName,\n        onChangeText: setCustomerName,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 779,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Phone\",\n        value: customerPhone,\n        onChangeText: setCustomerPhone,\n        keyboardType: \"phone-pad\",\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 780,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Email\",\n        value: customerEmail,\n        onChangeText: setCustomerEmail,\n        keyboardType: \"email-address\",\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 12\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '600',\n          marginBottom: 6\n        },\n        children: \"Job address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Address line 1\",\n        value: addressLine1,\n        onChangeText: setAddressLine1,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 784,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        placeholder: \"Address line 2\",\n        value: addressLine2,\n        onChangeText: setAddressLine2,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 785,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          gap: 8\n        },\n        children: [_jsxDEV(TextInput, {\n          placeholder: \"City\",\n          value: city,\n          onChangeText: setCity,\n          style: {\n            flex: 1,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 787,\n          columnNumber: 11\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"State\",\n          value: stateCode,\n          onChangeText: setStateCode,\n          style: {\n            width: 80,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 788,\n          columnNumber: 11\n        }, this), _jsxDEV(TextInput, {\n          placeholder: \"ZIP\",\n          value: zip,\n          onChangeText: setZip,\n          style: {\n            width: 100,\n            borderWidth: 1,\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 789,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 786,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          marginTop: 16\n        },\n        children: _jsxDEV(Button, {\n          title: \"Create Lead\",\n          onPress: submit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 793,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 792,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 748,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 747,\n    columnNumber: 5\n  }, this);\n}\nfunction EstimateEditorScreen({\n  route,\n  navigation\n}) {\n  const {\n    token,\n    user\n  } = useAuth();\n  const {\n    leadId\n  } = route.params || {};\n  const [estimateId, setEstimateId] = useState(null);\n  const [items, setItems] = useState([]);\n  const [desc, setDesc] = useState('');\n  const [qty, setQty] = useState('1');\n  const [price, setPrice] = useState('0');\n  const [notes, setNotes] = useState('');\n  const [photoUrl, setPhotoUrl] = useState(null);\n  const [subtotal, setSubtotal] = useState(0);\n  const [taxRate, setTaxRate] = useState(7.0);\n  const [tax, setTax] = useState(0);\n  const [total, setTotal] = useState(0);\n  const createEstimate = async () => {\n    const est = await api('/estimates', 'POST', {\n      leadId,\n      subtotal: 0,\n      taxRate: 7.0,\n      total: 0\n    }, token);\n    setEstimateId(est.id);\n  };\n  const addItem = async () => {\n    if (!estimateId) {\n      alert('Create estimate first');\n      return;\n    }\n    const data = await api(`/estimates/${estimateId}/items`, 'POST', {\n      description: desc,\n      qty: parseFloat(qty),\n      unitPrice: parseFloat(price)\n    }, token);\n    setItems(prev => [data, ...prev]);\n    setDesc('');\n    setQty('1');\n    setPrice('0');\n  };\n  const suggest = async () => {\n    const r = await api('/ai/estimate-suggest', 'POST', {\n      notes\n    }, token);\n    if (!estimateId) await createEstimate();\n    for (const it of r.items) {\n      await api(`/estimates/${estimateId}/items`, 'POST', it, token);\n    }\n    Alert.alert('Added', 'Suggested line-items added');\n  };\n  const pickPhoto = async () => {\n    const res = await ImagePicker.launchImageLibraryAsync({\n      base64: true,\n      quality: 0.6\n    });\n    if (!res.canceled && res.assets && res.assets[0].base64) {\n      const dataUrl = `data:image/jpeg;base64,${res.assets[0].base64}`;\n      try {\n        const up = await api('/upload/image', 'POST', {\n          dataUrl\n        }, token);\n        setPhotoUrl(up.url);\n      } catch (e) {\n        db.transaction(tx => tx.executeSql('INSERT INTO queue (type, payload) VALUES (?,?)', ['uploadPhoto', JSON.stringify({\n          dataUrl\n        })]));\n        Alert.alert('Queued upload', 'Will send when online');\n      }\n    }\n  };\n  const approveAndSign = () => {\n    if (!estimateId) {\n      Alert.alert('Create estimate');\n      return;\n    }\n    navigation.navigate('Signature', {\n      estimateId\n    });\n  };\n  const canEstimate = user?.role === 'ADMIN' || user?.role === 'ESTIMATOR';\n  useEffect(() => {\n    const s = items.reduce((acc, it) => acc + parseFloat(it.qty || 0) * parseFloat(it.unitPrice || 0), 0);\n    const t = s * (parseFloat(taxRate || 0) / 100);\n    setSubtotal(s);\n    setTax(t);\n    setTotal(s + t);\n  }, [items, taxRate]);\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      flex: 1,\n      padding: 16\n    },\n    children: [_jsxDEV(Text, {\n      style: {\n        fontSize: 18,\n        marginBottom: 8\n      },\n      children: [\"Estimate (Lead #\", leadId, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 7\n    }, this), canEstimate ? _jsxDEV(Button, {\n      title: estimateId ? `Estimate #${estimateId}` : \"Create Estimate\",\n      onPress: createEstimate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 862,\n      columnNumber: 22\n    }, this) : _jsxDEV(Text, {\n      children: \"View only (insufficient role)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 862,\n      columnNumber: 127\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 12\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 863,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      placeholder: \"Item description\",\n      value: desc,\n      onChangeText: setDesc,\n      style: {\n        borderWidth: 1,\n        padding: 8,\n        marginBottom: 6\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 864,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      placeholder: \"Qty\",\n      value: qty,\n      onChangeText: setQty,\n      keyboardType: \"decimal-pad\",\n      style: {\n        borderWidth: 1,\n        padding: 8,\n        marginBottom: 6\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 865,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      placeholder: \"Unit Price\",\n      value: price,\n      onChangeText: setPrice,\n      keyboardType: \"decimal-pad\",\n      style: {\n        borderWidth: 1,\n        padding: 8,\n        marginBottom: 6\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 866,\n      columnNumber: 7\n    }, this), canEstimate && _jsxDEV(Button, {\n      title: \"Add Item\",\n      onPress: addItem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 867,\n      columnNumber: 23\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 16\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 868,\n      columnNumber: 7\n    }, this), _jsxDEV(Text, {\n      style: {\n        fontWeight: '600'\n      },\n      children: \"AI helper\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 869,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      placeholder: \"Paste field notes...\",\n      value: notes,\n      onChangeText: setNotes,\n      multiline: true,\n      style: {\n        borderWidth: 1,\n        minHeight: 80,\n        padding: 8,\n        marginBottom: 6\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 870,\n      columnNumber: 7\n    }, this), canEstimate && _jsxDEV(Button, {\n      title: \"Suggest Line Items\",\n      onPress: suggest\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 871,\n      columnNumber: 23\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 16\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 872,\n      columnNumber: 7\n    }, this), _jsxDEV(Text, {\n      style: {\n        fontWeight: '600',\n        marginBottom: 6\n      },\n      children: \"Totals\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 873,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginBottom: 6\n      },\n      children: [_jsxDEV(Text, {\n        children: \"Subtotal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 875,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        children: [\"$\", subtotal.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 875,\n        columnNumber: 30\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 874,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        marginBottom: 6\n      },\n      children: [_jsxDEV(Text, {\n        children: \"Tax Rate (%)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 878,\n        columnNumber: 9\n      }, this), _jsxDEV(TextInput, {\n        value: String(taxRate),\n        onChangeText: v => setTaxRate(parseFloat(v) || 0),\n        keyboardType: \"decimal-pad\",\n        style: {\n          borderWidth: 1,\n          padding: 6,\n          width: 80,\n          textAlign: 'right'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 879,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 877,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginBottom: 6\n      },\n      children: [_jsxDEV(Text, {\n        children: \"Tax\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 882,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        children: [\"$\", tax.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 882,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 881,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        marginBottom: 12\n      },\n      children: [_jsxDEV(Text, {\n        style: {\n          fontWeight: '700'\n        },\n        children: \"Total\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 885,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: {\n          fontWeight: '700'\n        },\n        children: [\"$\", total.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 885,\n        columnNumber: 56\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 884,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 8\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 887,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: \"Attach Photo\",\n      onPress: pickPhoto\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 888,\n      columnNumber: 7\n    }, this), photoUrl ? _jsxDEV(Image, {\n      source: {\n        uri: `${API_URL}${photoUrl}`\n      },\n      style: {\n        height: 120,\n        marginTop: 8\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 889,\n      columnNumber: 19\n    }, this) : null, _jsxDEV(View, {\n      style: {\n        height: 16\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 890,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: \"Create Job from Estimate\",\n      onPress: async () => {\n        try {\n          if (!estimateId) await createEstimate();\n          const job = await api('/jobs', 'POST', {\n            name: `Job for Estimate #${estimateId || 'NEW'}`,\n            estimateId: estimateId,\n            status: 'SCHEDULED'\n          }, token);\n          Alert.alert('Job Created', `Job #${job.id}`);\n        } catch (e) {\n          Alert.alert('Error', e.message);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 891,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 8\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 898,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: \"Approve & Sign\",\n      onPress: approveAndSign\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 899,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 8\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 900,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: \"Send Estimate\",\n      onPress: async () => {\n        if (!estimateId) return Alert.alert('Create estimate first');\n        try {\n          await api(`/estimates/${estimateId}/send`, 'POST', {}, token);\n          Alert.alert('Sent', 'Estimate sent');\n        } catch (e) {\n          Alert.alert('Error', e.message);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 901,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 8\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 905,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: \"Download PDF\",\n      onPress: async () => {\n        if (!estimateId) return Alert.alert('Create estimate first');\n        const fileUri = `${FileSystem.documentDirectory}estimate-${estimateId}.pdf`;\n        try {\n          await FileSystem.downloadAsync(`${API_URL}/pdf/estimate/${estimateId}`, fileUri, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          Alert.alert('Saved', `PDF saved to:\\n${fileUri}`);\n        } catch (e) {\n          Alert.alert('Error', e.message);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 906,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 16\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 914,\n      columnNumber: 7\n    }, this), _jsxDEV(FlatList, {\n      data: items,\n      keyExtractor: (i, idx) => String(i.id || idx),\n      renderItem: ({\n        item\n      }) => _jsxDEV(View, {\n        style: {\n          padding: 10,\n          borderWidth: 1,\n          marginBottom: 8\n        },\n        children: [_jsxDEV(Text, {\n          style: {\n            fontWeight: '600'\n          },\n          children: item.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 920,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          children: [\"Qty: \", item.qty, \" \\xC3\\u2014 $\", item.unitPrice, \" = $\", (parseFloat(item.qty || 0) * parseFloat(item.unitPrice || 0)).toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 921,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 919,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 915,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 860,\n    columnNumber: 5\n  }, this);\n}\nfunction ScheduleScreen() {\n  const {\n    token\n  } = useAuth();\n  const [jobs, setJobs] = useState([]);\n  const [filter, setFilter] = useState('ALL');\n  const [queueCount, setQueueCount] = useState(0);\n  const loadQueueCount = () => {\n    db.transaction(tx => tx.executeSql('SELECT COUNT(*) as c FROM queue', [], (_, {\n      rows\n    }) => setQueueCount(rows._array?.[0]?.c || 0)));\n  };\n  const load = async () => {\n    try {\n      const data = await api('/jobs', 'GET', null, token);\n      setJobs(data);\n      db.transaction(tx => {\n        tx.executeSql('DELETE FROM jobs_cache;');\n        data.forEach(j => tx.executeSql('INSERT OR REPLACE INTO jobs_cache (id, name, status, startDate, endDate, notes) VALUES (?,?,?,?,?,?)', [j.id, j.name || '', j.status || 'SCHEDULED', j.startDate || '', j.endDate || '', j.notes || '']));\n      });\n    } catch (e) {\n      db.transaction(tx => tx.executeSql('SELECT id, name, status, startDate, endDate, notes FROM jobs_cache', [], (_, {\n        rows\n      }) => setJobs(rows._array || [])));\n    }\n  };\n  useEffect(() => {\n    load();\n    loadQueueCount();\n  }, [token]);\n  const inRange = d => {\n    if (!d) return false;\n    const today = new Date();\n    const dt = new Date(d);\n    if (filter === 'TODAY') {\n      return dt.getFullYear() === today.getFullYear() && dt.getMonth() === today.getMonth() && dt.getDate() === today.getDate();\n    }\n    if (filter === 'WEEK') {\n      const start = new Date(today);\n      start.setDate(today.getDate() - today.getDay());\n      const end = new Date(start);\n      end.setDate(start.getDate() + 6);\n      return dt >= start && dt <= end;\n    }\n    return true;\n  };\n  const filtered = jobs.filter(j => filter === 'ALL' ? true : inRange(j.startDate));\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: [_jsxDEV(View, {\n      style: {\n        padding: 12,\n        borderBottomWidth: 1\n      },\n      children: [_jsxDEV(Text, {\n        style: {\n          fontWeight: '700',\n          marginBottom: 6\n        },\n        children: \"Schedule\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 974,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          gap: 8,\n          marginBottom: 8\n        },\n        children: [_jsxDEV(Button, {\n          title: \"All\",\n          onPress: () => setFilter('ALL')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 976,\n          columnNumber: 11\n        }, this), _jsxDEV(Button, {\n          title: \"Today\",\n          onPress: () => setFilter('TODAY')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 977,\n          columnNumber: 11\n        }, this), _jsxDEV(Button, {\n          title: \"This Week\",\n          onPress: () => setFilter('WEEK')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 978,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 975,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [_jsxDEV(Text, {\n          children: [\"Offline queue: \", queueCount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 981,\n          columnNumber: 11\n        }, this), _jsxDEV(Button, {\n          title: \"Sync now\",\n          onPress: async () => {\n            await processQueue(token);\n            load();\n            loadQueueCount();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 982,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 980,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 973,\n      columnNumber: 7\n    }, this), _jsxDEV(FlatList, {\n      data: filtered,\n      keyExtractor: j => String(j.id),\n      contentContainerStyle: {\n        padding: 12\n      },\n      renderItem: ({\n        item\n      }) => {\n        const jobsite = item.Jobsite;\n        const address = jobsite ? [jobsite.addressLine1, jobsite.addressLine2, [jobsite.city, jobsite.state].filter(Boolean).join(', '), jobsite.zip].filter(Boolean).join(' • ') : '';\n        return _jsxDEV(View, {\n          style: {\n            borderWidth: 1,\n            padding: 10,\n            borderRadius: 8,\n            marginBottom: 8\n          },\n          children: [_jsxDEV(Text, {\n            style: {\n              fontWeight: '600'\n            },\n            children: item.name || `Job #${item.id}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 999,\n            columnNumber: 15\n          }, this), _jsxDEV(Text, {\n            children: [\"Status: \", item.status]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1000,\n            columnNumber: 15\n          }, this), _jsxDEV(Text, {\n            children: [\"Date: \", item.startDate || '-', item.endDate ? ` → ${item.endDate}` : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1001,\n            columnNumber: 15\n          }, this), address ? _jsxDEV(Text, {\n            style: {\n              color: '#555',\n              marginTop: 4\n            },\n            children: address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1002,\n            columnNumber: 26\n          }, this) : null, item.notes ? _jsxDEV(Text, {\n            style: {\n              marginTop: 4\n            },\n            children: [\"Notes: \", item.notes]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1003,\n            columnNumber: 29\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 998,\n          columnNumber: 13\n        }, this);\n      },\n      ListEmptyComponent: _jsxDEV(Text, {\n        style: {\n          textAlign: 'center',\n          marginTop: 20\n        },\n        children: [\"No jobs\", filter !== 'ALL' ? ' in range' : '', \" - add one!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1007,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 985,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 972,\n    columnNumber: 5\n  }, this);\n}\nfunction MeScreen({\n  navigation\n}) {\n  const {\n    setToken,\n    user\n  } = useAuth();\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      flex: 1,\n      padding: 16\n    },\n    children: [_jsxDEV(Text, {\n      style: {\n        fontSize: 20,\n        fontWeight: '600'\n      },\n      children: \"PrecisionTracker\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1017,\n      columnNumber: 7\n    }, this), _jsxDEV(Text, {\n      children: [\"User: \", user?.email, \" (\", user?.role, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1018,\n      columnNumber: 7\n    }, this), user?.role === 'ADMIN' && _jsxDEV(View, {\n      style: {\n        height: 12\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1019,\n      columnNumber: 32\n    }, this), user?.role === 'ADMIN' && _jsxDEV(Button, {\n      title: \"Manage Users\",\n      onPress: () => navigation.navigate('UsersAdmin')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1020,\n      columnNumber: 32\n    }, this), _jsxDEV(View, {\n      style: {\n        height: 20\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1021,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: \"Sign out\",\n      onPress: () => setToken(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1022,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1016,\n    columnNumber: 5\n  }, this);\n}\nconst Stack = createNativeStackNavigator();\nconst Tabs = createBottomTabNavigator();\nfunction TabsNav() {\n  return _jsxDEV(Tabs.Navigator, {\n    children: [_jsxDEV(Tabs.Screen, {\n      name: \"Leads\",\n      component: LeadsScreen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1033,\n      columnNumber: 7\n    }, this), _jsxDEV(Tabs.Screen, {\n      name: \"Jobs\",\n      component: JobsKanbanScreen,\n      options: {\n        title: 'Jobs'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1034,\n      columnNumber: 7\n    }, this), _jsxDEV(Tabs.Screen, {\n      name: \"Schedule\",\n      component: ScheduleScreen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1035,\n      columnNumber: 7\n    }, this), _jsxDEV(Tabs.Screen, {\n      name: \"Me\",\n      component: MeScreen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1036,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1032,\n    columnNumber: 5\n  }, this);\n}\nfunction LoginScreen() {\n  const [email, setEmail] = useState('admin@example.com');\n  const [password, setPassword] = useState('test123');\n  const [busy, setBusy] = useState(false);\n  const {\n    setToken,\n    setUser\n  } = useAuth();\n  async function login() {\n    try {\n      setBusy(true);\n      const res = await fetch(`${API_URL}/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data?.message || data?.error || 'Login failed');\n      const tok = data.token || data.accessToken;\n      if (!tok) throw new Error('No token returned from server');\n      const normalizedUser = data.user ? Object.assign({}, data.user, {\n        role: normalizeRole(data.user.role)\n      }) : {\n        email,\n        role: 'ADMIN',\n        name: 'Admin'\n      };\n      setToken(tok);\n      setUser(normalizedUser);\n      try {\n        await SecureStore.setItemAsync('auth_token', tok);\n        await SecureStore.setItemAsync('auth_user', JSON.stringify(normalizedUser));\n      } catch {}\n      Alert.alert('Welcome', 'Logged in');\n    } catch (e) {\n      Alert.alert('Error', e.message);\n    } finally {\n      setBusy(false);\n    }\n  }\n  return _jsxDEV(View, {\n    style: {\n      flex: 1,\n      padding: 20,\n      justifyContent: 'center'\n    },\n    children: [_jsxDEV(Text, {\n      style: {\n        fontSize: 24,\n        marginBottom: 16\n      },\n      children: \"PrecisionTracker\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1086,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      placeholder: \"Email\",\n      autoCapitalize: \"none\",\n      value: email,\n      onChangeText: setEmail,\n      style: {\n        borderWidth: 1,\n        padding: 12,\n        marginBottom: 12\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1087,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      placeholder: \"Password\",\n      secureTextEntry: true,\n      value: password,\n      onChangeText: setPassword,\n      style: {\n        borderWidth: 1,\n        padding: 12,\n        marginBottom: 12\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1094,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: busy ? 'Signing in...' : 'Sign in',\n      onPress: login,\n      disabled: busy\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1085,\n    columnNumber: 5\n  }, this);\n}\nexport default function App() {\n  const [token, setToken] = useState(null);\n  const [user, setUser] = useState(null);\n  const [booting, setBooting] = useState(true);\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const [tok, usr] = await Promise.all([SecureStore.getItemAsync('auth_token'), SecureStore.getItemAsync('auth_user')]);\n        if (mounted && tok) {\n          setToken(tok);\n          if (usr) {\n            const parsed = JSON.parse(usr);\n            parsed.role = normalizeRole(parsed.role);\n            setUser(parsed);\n          }\n        }\n      } catch {} finally {\n        if (mounted) setBooting(false);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n  const authValue = {\n    token,\n    setToken: t => {\n      setToken(t);\n      if (!t) {\n        try {\n          SecureStore.deleteItemAsync('auth_token');\n          SecureStore.deleteItemAsync('auth_user');\n        } catch {}\n      }\n    },\n    user,\n    setUser\n  };\n  if (booting) {\n    return _jsxDEV(SafeAreaView, {\n      style: {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: _jsxDEV(Text, {\n        children: \"Loading\\xE2\\u20AC\\xA6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1147,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1146,\n      columnNumber: 7\n    }, this);\n  }\n  return _jsxDEV(AuthContext.Provider, {\n    value: authValue,\n    children: _jsxDEV(NavigationContainer, {\n      children: !token ? _jsxDEV(Stack.Navigator, {\n        children: _jsxDEV(Stack.Screen, {\n          name: \"Login\",\n          component: LoginScreen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1157,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1156,\n        columnNumber: 11\n      }, this) : _jsxDEV(Stack.Navigator, {\n        children: [_jsxDEV(Stack.Screen, {\n          name: \"Tabs\",\n          component: TabsNav,\n          options: {\n            headerShown: false\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1161,\n          columnNumber: 13\n        }, this), _jsxDEV(Stack.Screen, {\n          name: \"NewLead\",\n          component: NewLeadScreen,\n          options: {\n            title: 'New Lead'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1162,\n          columnNumber: 13\n        }, this), _jsxDEV(Stack.Screen, {\n          name: \"EstimateEditor\",\n          component: EstimateEditorScreen,\n          options: {\n            title: 'Estimate'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1163,\n          columnNumber: 13\n        }, this), _jsxDEV(Stack.Screen, {\n          name: \"Signature\",\n          component: SignatureScreen,\n          options: {\n            title: 'Signature'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1164,\n          columnNumber: 13\n        }, this), _jsxDEV(Stack.Screen, {\n          name: \"UsersAdmin\",\n          component: UsersAdminScreen,\n          options: {\n            title: 'Users (Admin)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1165,\n          columnNumber: 13\n        }, this), _jsxDEV(Stack.Screen, {\n          name: \"JobDetail\",\n          component: JobDetailScreen,\n          options: {\n            title: 'Job'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1166,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1160,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1154,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1153,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"names":["React","useEffect","useState","createContext","useContext","useRef","useCallback","NavigationContainer","useFocusEffect","createNativeStackNavigator","createBottomTabNavigator","Text","TextInput","Button","FlatList","TouchableOpacity","SafeAreaView","Alert","Image","ScrollView","RefreshControl","ImagePicker","FileSystem","SQLite","Svg","Path","ViewShot","Platform","View","SecureStore","jsxDEV","_jsxDEV","API_URL","process","env","EXPO_PUBLIC_API_URL","initOfflineTables","database","transaction","tx","executeSql","e","db","getDb","OS","fn","execAsync","runAsync","openDatabaseSync","alert","dbHandle","normalizeRole","role","r","String","toUpperCase","includes","AuthContext","useAuth","api","path","method","body","token","res","fetch","headers","Object","assign","Authorization","JSON","stringify","undefined","ok","Error","json","error","SignaturePad","onCapturePng","points","setPoints","setPath","shotRef","ref","options","format","quality","result","style","height","borderWidth","backgroundColor","children","onStartShouldSetResponder","onResponderMove","x","nativeEvent","locationX","y","locationY","p","onResponderRelease","base64","current","capture","flex","width","d","stroke","strokeWidth","fill","fileName","_jsxFileName","lineNumber","columnNumber","SignatureScreen","route","navigation","estimateId","params","sigPng","setSigPng","save","resp","signaturePngUrl","paymentLink","goBack","padding","fontSize","marginBottom","title","onPress","UsersAdminScreen","users","setUsers","email","setEmail","fullName","setFullName","setRole","load","invite","promote","id","newRole","remove","text","fontWeight","placeholder","value","onChangeText","marginVertical","autoCapitalize","data","keyExtractor","u","renderItem","item","flexDirection","gap","marginTop","flexWrap","color","JobsKanbanScreen","jobs","setJobs","loading","setLoading","newJobName","setNewJobName","newJobDate","setNewJobDate","newJobNotes","setNewJobNotes","showJobDetails","setShowJobDetails","newCustomerName","setNewCustomerName","newCustomerPhone","setNewCustomerPhone","newCustomerEmail","setNewCustomerEmail","newAddressLine1","setNewAddressLine1","newAddressLine2","setNewAddressLine2","newCity","setNewCity","newStateCode","setNewStateCode","newZip","setNewZip","forEach","j","name","status","startDate","endDate","notes","_","rows","_array","resetForm","createJob","trim","hasCustomer","some","v","hasAddress","payload","customer","phone","billingAddress","jobsite","addressLine1","addressLine2","city","state","zip","created","prev","message","setStatus","updated","map","job","removeJob","filter","columns","borderBottomWidth","alignItems","multiline","minHeight","keyboardType","justifyContent","horizontal","contentContainerStyle","col","marginRight","borderRadius","navigate","jobId","JobDetailScreen","user","jobName","setJobName","jobStartDate","setJobStartDate","jobEndDate","setJobEndDate","jobNotes","setJobNotes","jobCustomerName","setJobCustomerName","jobCustomerPhone","setJobCustomerPhone","jobCustomerEmail","setJobCustomerEmail","jobAddressLine1","setJobAddressLine1","jobAddressLine2","setJobAddressLine2","jobCity","setJobCity","jobStateCode","setJobStateCode","jobZip","setJobZip","changeOrders","setCO","setTitle","amountDelta","setAmountDelta","loadCO","loadJob","Customer","Jobsite","addCO","parseFloat","saveJobDetails","paddingBottom","length","JobTasks","JobSchedule","tasks","setTasks","dueDate","setDueDate","t","add","done","events","setEvents","startAt","setStartAt","endAt","setEndAt","ev","processQueue","Promise","resolve","items","q","parse","type","dataUrl","txx","LeadsScreen","leads","setLeads","refreshing","setRefreshing","fetchLeads","l","description","onRefresh","refreshControl","leadId","numberOfLines","ListHeaderComponent","NewLeadScreen","setDescription","customerName","setCustomerName","customerPhone","setCustomerPhone","customerEmail","setCustomerEmail","setAddressLine1","setAddressLine2","setCity","stateCode","setStateCode","setZip","statuses","buildPayload","createLeadOnline","replace","queueLead","submit","s","paddingVertical","paddingHorizontal","borderColor","EstimateEditorScreen","setEstimateId","setItems","desc","setDesc","qty","setQty","price","setPrice","setNotes","photoUrl","setPhotoUrl","subtotal","setSubtotal","taxRate","setTaxRate","tax","setTax","total","setTotal","createEstimate","est","addItem","unitPrice","suggest","it","pickPhoto","launchImageLibraryAsync","canceled","assets","up","url","approveAndSign","canEstimate","reduce","acc","toFixed","textAlign","source","uri","fileUri","documentDirectory","downloadAsync","i","idx","ScheduleScreen","setFilter","queueCount","setQueueCount","loadQueueCount","c","inRange","today","Date","dt","getFullYear","getMonth","getDate","start","setDate","getDay","end","filtered","address","Boolean","join","ListEmptyComponent","MeScreen","setToken","Stack","Tabs","TabsNav","Navigator","Screen","component","LoginScreen","password","setPassword","busy","setBusy","setUser","login","tok","accessToken","normalizedUser","setItemAsync","secureTextEntry","disabled","App","booting","setBooting","mounted","usr","all","getItemAsync","parsed","authValue","deleteItemAsync","Provider","headerShown"],"sources":["C:/Users/Tyler/Downloads/PrecisionTracker-v4-wired/PrecisionTracker/mobile/App.js"],"sourcesContent":["\r\nimport React, { useEffect, useState, createContext, useContext, useRef, useCallback } from 'react';\nimport { NavigationContainer, useFocusEffect } from '@react-navigation/native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\r\nimport {Text, TextInput, Button, FlatList, TouchableOpacity, SafeAreaView, Alert, Image, ScrollView, RefreshControl } from 'react-native';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport * as FileSystem from 'expo-file-system';\r\nimport * as SQLite from 'expo-sqlite';\r\nimport Svg, { Path } from 'react-native-svg';\r\nimport ViewShot from 'react-native-view-shot';\r\nimport { Platform, View } from 'react-native';\r\nimport * as SecureStore from 'expo-secure-store';\r\n// import * as SQLite from 'expo-sqlite';\r\n\r\n\r\nconst API_URL = process.env.EXPO_PUBLIC_API_URL || 'http://localhost:4000';\r\n// const db = SQLite.openDatabase('offline.db');\r\n\r\n// function initDB(){\r\n//   db.transaction(tx => {\r\n//     tx.executeSql('CREATE TABLE IF NOT EXISTS queue (id INTEGER PRIMARY KEY AUTOINCREMENT, type TEXT, payload TEXT);');\r\n//     tx.executeSql('CREATE TABLE IF NOT EXISTS uploads (id INTEGER PRIMARY KEY AUTOINCREMENT, dataUrl TEXT);');\r\n//     tx.executeSql('CREATE TABLE IF NOT EXISTS leads_cache (id INTEGER PRIMARY KEY, description TEXT, status TEXT);');\r\n//   });\r\n// }\r\n\r\nfunction initOfflineTables(database){\r\n  try {\r\n    if (!database || typeof database.transaction !== 'function') return;\r\n    database.transaction(tx => {\r\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS queue (id INTEGER PRIMARY KEY AUTOINCREMENT, type TEXT, payload TEXT);');\r\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS uploads (id INTEGER PRIMARY KEY AUTOINCREMENT, dataUrl TEXT);');\r\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS leads_cache (id INTEGER PRIMARY KEY, description TEXT, status TEXT);');\r\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS jobs_cache (id INTEGER PRIMARY KEY, name TEXT, status TEXT, startDate TEXT, endDate TEXT, notes TEXT);');\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS tasks_cache (id INTEGER PRIMARY KEY, jobId INTEGER, title TEXT, status TEXT, dueDate TEXT);');\r\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS calendar_cache (id INTEGER PRIMARY KEY, jobId INTEGER, title TEXT, startAt TEXT, endAt TEXT);');\r\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS estimates_cache (id INTEGER PRIMARY KEY, leadId INTEGER, subtotal REAL, taxRate REAL, total REAL, status TEXT);');\r\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS estimate_items_cache (id INTEGER PRIMARY KEY, estimateId INTEGER, description TEXT, qty REAL, unitPrice REAL);');\r\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS change_orders_cache (id INTEGER PRIMARY KEY, jobId INTEGER, title TEXT, amountDelta REAL, status TEXT);');\r\n      tx.executeSql && tx.executeSql('CREATE TABLE IF NOT EXISTS users_cache (id INTEGER PRIMARY KEY, email TEXT, fullName TEXT, role TEXT);');\r\n    });\r\n  } catch (e) {\r\n    // best-effort; avoid noisy alerts in offline mode\r\n  }\r\n}\r\n\r\nlet db;\r\nexport function getDb() {\r\n  if (db) return db;\r\n\r\n  // Web: safe no-op DB\r\n  if (Platform.OS === 'web') {\r\n    db = {\r\n      transaction: (fn) => fn({ executeSql: () => {} }),\r\n      execAsync: async () => {},\r\n      runAsync: async () => {},\r\n    };\r\n    return db;\r\n  }\r\n\r\n  // SDK 51+: prefer sync, then async; DO NOT reference openDatabase (removed)\r\n  if ('openDatabaseSync' in SQLite) {\r\n    db = SQLite.openDatabaseSync('offline.db');\r\n    return db;\r\n  }\r\n\r\n  if ('openDatabaseAsync' in SQLite) {\r\n    // Minimal adapter so existing code wonâ€™t crash; refactor later if needed\r\n    Alert.alert('Info', 'Using async SQLite; offline queue limited until refactor.');\r\n    db = {\r\n      transaction: (fn) => fn({ executeSql: () => {} }),\r\n      execAsync: async () => {},\r\n      runAsync: async () => {},\r\n    };\r\n    return db;\r\n  }\r\n\r\n  // Safety fallback\r\n  db = {\r\n    transaction: (fn) => fn({ executeSql: () => {} }),\r\n    execAsync: async () => {},\r\n    runAsync: async () => {},\r\n  };\r\n  return db;\r\n}\r\n\r\n// DB handle\r\nconst dbHandle = getDb();\r\ninitOfflineTables(dbHandle);\r\n\r\n// ---------- Helpers ----------\r\nconst normalizeRole = (role) => {\r\n  if (!role) return 'TECH';\r\n  const r = String(role).toUpperCase();\r\n  if (['ADMIN','ESTIMATOR','SUPERVISOR','TECH'].includes(r)) return r;\r\n  if (r === 'STANDARD' || r === 'USER') return 'TECH';\r\n  return r;\r\n};\r\n\r\nconst AuthContext = createContext(null);\r\nfunction useAuth(){ return useContext(AuthContext); }\r\nasync function api(path, method='GET', body, token){\r\n  const res = await fetch(`${API_URL}${path}`, {\r\n    method, headers: { 'Content-Type':'application/json', ...(token?{Authorization:`Bearer ${token}`}:{}) },\r\n    body: body?JSON.stringify(body):undefined\r\n  });\r\n  if(!res.ok){ throw new Error((await res.json()).error || 'Request failed'); }\r\n  return res.json();\r\n}\r\n\r\n// ---------- Signature Pad to PNG ----------\r\nfunction SignaturePad({ onCapturePng }){\r\n  const [points, setPoints] = useState([]);\r\n  const [path, setPath] = useState('');\r\n  const shotRef = useRef(null);\r\n  return (\r\n    <ViewShot ref={shotRef} options={{ format: 'png', quality: 0.9, result: 'base64' }} style={{ height:220, borderWidth:1, backgroundColor:'#fff' }}>\r\n      <View\r\n        onStartShouldSetResponder={()=>true}\r\n        onResponderMove={(e)=>{\r\n          const x = e.nativeEvent.locationX, y = e.nativeEvent.locationY;\r\n          setPath(p => p + (p ? ` L ${x} ${y}` : ` M ${x} ${y}`));\r\n        }}\r\n        onResponderRelease={async ()=>{\r\n          const base64 = await shotRef.current.capture();\r\n          onCapturePng && onCapturePng('data:image/png;base64,' + base64);\r\n        }}\r\n        style={{ flex:1 }}\r\n      >\r\n        <Svg height=\"100%\" width=\"100%\"><Path d={path} stroke=\"black\" strokeWidth=\"2\" fill=\"none\" /></Svg>\r\n      </View>\r\n    </ViewShot>\r\n  );\r\n}\r\n\r\nfunction SignatureScreen({ route, navigation }){\r\n  const { token } = useAuth();\r\n  const { estimateId } = route.params;\r\n  const [sigPng, setSigPng] = useState(null);\r\n  const save = async () => {\r\n    if(!sigPng){ Alert.alert('Please sign first'); return; }\r\n    const resp = await api(`/estimates/${estimateId}/approve`, 'POST', { signaturePngUrl: sigPng }, token);\r\n    Alert.alert('Approved', `Payment link:\\n${(resp && resp.paymentLink) ? resp.paymentLink : 'Unavailable'}`); navigation.goBack();\r\n  };\r\n  return (\r\n    <SafeAreaView style={{ padding:16 }}>\r\n      <Text style={{ fontSize:18, marginBottom:8 }}>Sign Estimate #{estimateId}</Text>\r\n      <SignaturePad onCapturePng={setSigPng} />\r\n      <View style={{ height:12 }} />\r\n      <Button title=\"Save Signature\" onPress={save} />\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\n// ---------- Admin: Users ----------\r\nfunction UsersAdminScreen(){\r\n  const { token } = useAuth();\r\n  const [users, setUsers] = useState([]);\r\n  const [email, setEmail] = useState('');\r\n  const [fullName, setFullName] = useState('');\r\n  const [role, setRole] = useState('TECH');\r\n  const load = async ()=> setUsers(await api('/users','GET',null,token));\r\n  useEffect(()=>{ load(); },[]);\r\n  const invite = async ()=>{\r\n    await api('/users','POST', { email, fullName, role: normalizeRole(role) }, token);\r\n    setEmail(''); setFullName(''); setRole('TECH'); load();\r\n  };\r\n  const promote = async (id, newRole)=>{\r\n    await api(`/users/${id}`,'PATCH',{ role: normalizeRole(newRole) }, token); load();\r\n  };\r\n  const remove = async (id) => {\r\n    Alert.alert('Delete user', 'Are you sure?', [\r\n      { text: 'Cancel', style: 'cancel' },\r\n      { text: 'Delete', style: 'destructive', onPress: async ()=>{ await api(`/users/${id}`,'DELETE',null,token); load(); } }\r\n    ]);\r\n  };\r\n  return (\r\n    <SafeAreaView style={{ flex:1, padding:16 }}>\r\n      <Text style={{ fontSize:18, fontWeight:'600' }}>Invite User</Text>\r\n      <TextInput placeholder=\"Full name\" value={fullName} onChangeText={setFullName} style={{ borderWidth:1, padding:8, marginVertical:6 }} />\r\n      <TextInput placeholder=\"Email\" value={email} onChangeText={setEmail} autoCapitalize='none' style={{ borderWidth:1, padding:8, marginVertical:6 }} />\r\n      <TextInput placeholder=\"Role (ADMIN/ESTIMATOR/SUPERVISOR/TECH)\" value={role} onChangeText={setRole} style={{ borderWidth:1, padding:8, marginVertical:6 }} />\r\n      <Button title=\"Create User\" onPress={invite} />\r\n      <View style={{ height:16 }} />\r\n      <FlatList data={users} keyExtractor={u=>String(u.id)} renderItem={({item}) => (\r\n        <View style={{ padding:12, borderWidth:1, marginBottom:8 }}>\r\n          <Text style={{ fontWeight:'600' }}>{item.fullName || item.email}</Text>\r\n          <Text>{item.email}</Text>\r\n          <Text>Role: {item.role}</Text>\r\n          <View style={{ flexDirection:'row', gap:8, marginTop:8, flexWrap:'wrap' }}>\r\n            <Button title=\"Admin\" onPress={()=>promote(item.id,'ADMIN')} />\r\n            <Button title=\"Estimator\" onPress={()=>promote(item.id,'ESTIMATOR')} />\r\n            <Button title=\"Supervisor\" onPress={()=>promote(item.id,'SUPERVISOR')} />\r\n            <Button title=\"Tech\" onPress={()=>promote(item.id,'TECH')} />\r\n            <View style={{ width:8 }} />\r\n            <Button title=\"Delete\" color=\"#c00\" onPress={()=>remove(item.id)} />\r\n          </View>\r\n        </View>\r\n      )}/>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\n// ---------- Jobs Kanban + Change Orders ----------\r\nfunction JobsKanbanScreen({ navigation }){\n  const { token } = useAuth();\n  const [jobs, setJobs] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [newJobName, setNewJobName] = useState('');\n  const [newJobDate, setNewJobDate] = useState('');\n  const [newJobNotes, setNewJobNotes] = useState('');\n  const [showJobDetails, setShowJobDetails] = useState(false);\n  const [newCustomerName, setNewCustomerName] = useState('');\n  const [newCustomerPhone, setNewCustomerPhone] = useState('');\n  const [newCustomerEmail, setNewCustomerEmail] = useState('');\n  const [newAddressLine1, setNewAddressLine1] = useState('');\n  const [newAddressLine2, setNewAddressLine2] = useState('');\n  const [newCity, setNewCity] = useState('');\n  const [newStateCode, setNewStateCode] = useState('');\n  const [newZip, setNewZip] = useState('');\n\n  const load = useCallback(async () => {\n    setLoading(true);\n    try {\n      const data = await api('/jobs','GET',null,token);\n      setJobs(data);\n      db.transaction(tx => {\n        tx.executeSql('DELETE FROM jobs_cache;');\n        data.forEach(j => tx.executeSql('INSERT OR REPLACE INTO jobs_cache (id, name, status, startDate, endDate, notes) VALUES (?,?,?,?,?,?)', [j.id, j.name||'', j.status||'SCHEDULED', j.startDate||'', j.endDate||'', j.notes||'']));\n      });\n    } catch(e) {\n      db.transaction(tx => tx.executeSql('SELECT id, name, status, startDate, endDate, notes FROM jobs_cache', [], (_, { rows }) => setJobs(rows._array || [])));\n    } finally {\n      setLoading(false);\n    }\n  }, [token]);\n\n  useFocusEffect(useCallback(() => {\n    load();\n  }, [load]));\n\n  const resetForm = () => {\n    setNewJobName('');\n    setNewJobDate('');\n    setNewJobNotes('');\n    setNewCustomerName('');\n    setNewCustomerPhone('');\n    setNewCustomerEmail('');\n    setNewAddressLine1('');\n    setNewAddressLine2('');\n    setNewCity('');\n    setNewStateCode('');\n    setNewZip('');\n  };\n\n  const createJob = async () => {\n    if(!newJobName.trim()){\n      Alert.alert('Missing info', 'Please add a job name.');\n      return;\n    }\n    const hasCustomer = [newCustomerName, newCustomerPhone, newCustomerEmail].some(v => v && v.trim());\n    const hasAddress = [newAddressLine1, newCity, newStateCode, newZip].some(v => v && v.trim());\n    const payload = {\n      name: newJobName.trim(),\n      status: 'SCHEDULED',\n      startDate: newJobDate || null,\n      notes: newJobNotes.trim() || null,\n    };\n    if (hasCustomer) {\n      payload.customer = {\n        name: newCustomerName.trim(),\n        phone: newCustomerPhone.trim(),\n        email: newCustomerEmail.trim(),\n        billingAddress: newAddressLine1 ? `${newAddressLine1}${newAddressLine2 ? `\\n${newAddressLine2}` : ''}${newCity ? `\\n${newCity}, ${newStateCode} ${newZip}` : ''}` : null,\n      };\n    }\n    if (hasAddress) {\n      payload.jobsite = {\n        addressLine1: newAddressLine1.trim(),\n        addressLine2: newAddressLine2.trim(),\n        city: newCity.trim(),\n        state: newStateCode.trim(),\n        zip: newZip.trim(),\n      };\n    }\n    try {\n      const created = await api('/jobs','POST', payload, token);\n      setJobs(prev => [created, ...prev]);\n      resetForm();\n      Alert.alert('Job created', `Job #${created.id} ready to schedule.`);\n    } catch(e) {\n      Alert.alert('Error', e.message || 'Unable to create job');\n    }\n  };\n\n  const setStatus = async (id, status) => {\n    try {\n      const updated = await api(`/jobs/${id}`,'PATCH',{ status }, token);\n      setJobs(prev => prev.map(job => job.id === id ? updated : job));\n    } catch(e) {\n      Alert.alert('Error', e.message || 'Unable to update job status');\n    }\n  };\n\n  const removeJob = async (id) => {\n    Alert.alert('Delete Job', `Delete job #${id}?`, [\n      { text:'Cancel', style:'cancel' },\n      { text:'Delete', style:'destructive', onPress: async ()=>{\n        try {\n          await api(`/jobs/${id}`,'DELETE',null,token);\n          setJobs(prev => prev.filter(job => job.id !== id));\n        } catch(e) {\n          Alert.alert('Error', e.message || 'Unable to delete job');\n        }\n      } }\n    ]);\n  };\n  const columns = ['SCHEDULED','IN_PROGRESS','ON_HOLD','DONE'];\n  return (\n    <SafeAreaView style={{ flex:1 }}>\n      <View style={{ padding:12, borderBottomWidth:1 }}>\r\n        <Text style={{ fontWeight:'700', marginBottom:6 }}>New Job</Text>\r\n        <View style={{ flexDirection:'row', gap:8, alignItems:'center' }}>\n          <TextInput placeholder=\"Job name\" value={newJobName} onChangeText={setNewJobName} style={{ flex:1, borderWidth:1, padding:8 }} />\n          <TextInput placeholder=\"Start date (YYYY-MM-DD)\" value={newJobDate} onChangeText={setNewJobDate} style={{ flex:1, borderWidth:1, padding:8 }} />\n        </View>\n        {showJobDetails && (\n          <View style={{ marginTop:12 }}>\n            <Text style={{ fontWeight:'600', marginBottom:4 }}>Notes</Text>\n            <TextInput value={newJobNotes} onChangeText={setNewJobNotes} placeholder=\"Internal notes\" multiline style={{ borderWidth:1, padding:8, minHeight:60, marginBottom:10 }} />\n            <Text style={{ fontWeight:'600', marginBottom:4 }}>Customer</Text>\n            <TextInput placeholder=\"Name\" value={newCustomerName} onChangeText={setNewCustomerName} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n            <TextInput placeholder=\"Phone\" value={newCustomerPhone} onChangeText={setNewCustomerPhone} keyboardType=\"phone-pad\" style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n            <TextInput placeholder=\"Email\" value={newCustomerEmail} onChangeText={setNewCustomerEmail} keyboardType=\"email-address\" style={{ borderWidth:1, padding:8, marginBottom:10 }} />\n            <Text style={{ fontWeight:'600', marginBottom:4 }}>Job Address</Text>\n            <TextInput placeholder=\"Address line 1\" value={newAddressLine1} onChangeText={setNewAddressLine1} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n            <TextInput placeholder=\"Address line 2\" value={newAddressLine2} onChangeText={setNewAddressLine2} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n            <View style={{ flexDirection:'row', gap:8 }}>\n              <TextInput placeholder=\"City\" value={newCity} onChangeText={setNewCity} style={{ flex:1, borderWidth:1, padding:8 }} />\n              <TextInput placeholder=\"State\" value={newStateCode} onChangeText={setNewStateCode} style={{ width:80, borderWidth:1, padding:8 }} />\n              <TextInput placeholder=\"ZIP\" value={newZip} onChangeText={setNewZip} style={{ width:100, borderWidth:1, padding:8 }} />\n            </View>\n          </View>\n        )}\n        <View style={{ flexDirection:'row', justifyContent:'space-between', alignItems:'center', marginTop:12 }}>\n          <TouchableOpacity onPress={()=>setShowJobDetails(v => !v)}>\n            <Text style={{ color:'#007AFF' }}>{showJobDetails ? 'Hide details' : 'Add customer & address'}</Text>\n          </TouchableOpacity>\n          <Button title=\"Create\" onPress={createJob} />\n        </View>\n        {loading && <Text style={{ marginTop:8 }}>Refreshing jobs…</Text>}\n      </View>\n      <ScrollView horizontal contentContainerStyle={{ padding:12 }}>\r\n        {columns.map(col => (\r\n          <View key={col} style={{ width:300, marginRight:12 }}>\r\n            <Text style={{ fontWeight:'700', marginBottom:8 }}>{col}</Text>\r\n            {jobs.filter(j=>j.status===col).map(j => (\r\n              <TouchableOpacity key={j.id} style={{ borderWidth:1, padding:10, borderRadius:8, marginBottom:8 }} onPress={()=>navigation.navigate('JobDetail', { jobId: j.id })}>\r\n                <Text style={{ fontWeight:'600' }}>{j.name || `Job #${j.id}`}</Text>\r\n                <Text>#{j.id}</Text>\r\n                <View style={{ height:8 }} />\r\n                <View style={{ flexDirection:'row', flexWrap:'wrap', gap:6 }}>\r\n                  <Button title=\"In Progress\" onPress={()=>setStatus(j.id,'IN_PROGRESS')} />\r\n                  <Button title=\"On Hold\" onPress={()=>setStatus(j.id,'ON_HOLD')} />\r\n                  <Button title=\"Done\" onPress={()=>setStatus(j.id,'DONE')} />\r\n                  <Button title=\"Delete\" color=\"#c00\" onPress={()=>removeJob(j.id)} />\r\n                </View>\r\n              </TouchableOpacity>\r\n            ))}\r\n          </View>\r\n        ))}\r\n      </ScrollView>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nfunction JobDetailScreen({ route }){\n  const { jobId } = route.params;\n  const { token, user } = useAuth();\n  const [jobName, setJobName] = useState('');\n  const [jobStartDate, setJobStartDate] = useState('');\n  const [jobEndDate, setJobEndDate] = useState('');\n  const [jobNotes, setJobNotes] = useState('');\n  const [jobCustomerName, setJobCustomerName] = useState('');\n  const [jobCustomerPhone, setJobCustomerPhone] = useState('');\n  const [jobCustomerEmail, setJobCustomerEmail] = useState('');\n  const [jobAddressLine1, setJobAddressLine1] = useState('');\n  const [jobAddressLine2, setJobAddressLine2] = useState('');\n  const [jobCity, setJobCity] = useState('');\n  const [jobStateCode, setJobStateCode] = useState('');\n  const [jobZip, setJobZip] = useState('');\n  const [changeOrders, setCO] = useState([]);\n  const [title, setTitle] = useState('');\n  const [amountDelta, setAmountDelta] = useState('0');\n  const loadCO = useCallback(async () => {\n    setCO(await api(`/change-orders/job/${jobId}`,'GET',null,token));\n  }, [jobId, token]);\n  const loadJob = useCallback(async () => {\n    try {\n      const j = await api(`/jobs/${jobId}`,'GET',null,token);\n      setJobName(j.name||'');\n      setJobStartDate(j.startDate||'');\n      setJobEndDate(j.endDate||'');\n      setJobNotes(j.notes||'');\n      const customer = j.Customer || {};\n      const jobsite = j.Jobsite || {};\n      setJobCustomerName(customer.name || '');\n      setJobCustomerPhone(customer.phone || '');\n      setJobCustomerEmail(customer.email || '');\n      setJobAddressLine1(jobsite.addressLine1 || '');\n      setJobAddressLine2(jobsite.addressLine2 || '');\n      setJobCity(jobsite.city || '');\n      setJobStateCode(jobsite.state || '');\n      setJobZip(jobsite.zip || '');\n    } catch(e) { }\n  }, [jobId, token]);\n  useEffect(()=>{ loadJob(); loadCO(); },[loadJob, loadCO]);\n  const addCO = async ()=>{\n    if(!title.trim()){\n      Alert.alert('Missing info', 'Add a title for the change order.');\n      return;\n    }\n    await api(`/change-orders/job/${jobId}`,'POST',{ title: title.trim(), amountDelta: parseFloat(amountDelta) || 0 }, token);\n    setTitle(''); setAmountDelta('0'); loadCO();\n  };\n  const saveJobDetails = async () => {\n    try {\n      await api(`/jobs/${jobId}`,'PATCH',{\n        name: jobName,\n        startDate: jobStartDate || null,\n        endDate: jobEndDate || null,\n        notes: jobNotes,\n        customer: {\n          name: jobCustomerName,\n          phone: jobCustomerPhone,\n          email: jobCustomerEmail,\n          billingAddress: jobAddressLine1 ? `${jobAddressLine1}${jobAddressLine2 ? `\\n${jobAddressLine2}` : ''}${jobCity ? `\\n${jobCity}, ${jobStateCode} ${jobZip}` : ''}` : null,\n        },\n        jobsite: {\n          addressLine1: jobAddressLine1,\n          addressLine2: jobAddressLine2,\n          city: jobCity,\n          state: jobStateCode,\n          zip: jobZip,\n        },\n      }, token);\n      Alert.alert('Saved', 'Job details updated.');\n      loadJob();\n    } catch(e) {\n      Alert.alert('Error', e.message || 'Unable to save job');\n    }\n  };\n  return (\n    <SafeAreaView style={{ flex:1 }}>\n      <ScrollView contentContainerStyle={{ padding:16, paddingBottom:32 }}>\n        <Text style={{ fontSize:18, fontWeight:'600', marginBottom:8 }}>Job #{jobId}</Text>\n        <Text style={{ fontWeight:'600', marginBottom:6 }}>Job Details</Text>\n        <TextInput placeholder=\"Job name\" value={jobName} onChangeText={setJobName} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n        <View style={{ flexDirection:'row', gap:8 }}>\n          <TextInput placeholder=\"Start date (YYYY-MM-DD)\" value={jobStartDate} onChangeText={setJobStartDate} style={{ flex:1, borderWidth:1, padding:8 }} />\n          <TextInput placeholder=\"End date (YYYY-MM-DD)\" value={jobEndDate} onChangeText={setJobEndDate} style={{ flex:1, borderWidth:1, padding:8 }} />\n        </View>\n        <TextInput placeholder=\"Notes / scope\" value={jobNotes} onChangeText={setJobNotes} multiline style={{ borderWidth:1, padding:8, marginTop:6, minHeight:80 }} />\n\n        <Text style={{ fontWeight:'600', marginTop:16 }}>Customer</Text>\n        <TextInput placeholder=\"Name\" value={jobCustomerName} onChangeText={setJobCustomerName} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n        <TextInput placeholder=\"Phone\" value={jobCustomerPhone} onChangeText={setJobCustomerPhone} keyboardType=\"phone-pad\" style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n        <TextInput placeholder=\"Email\" value={jobCustomerEmail} onChangeText={setJobCustomerEmail} keyboardType=\"email-address\" style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n\n        <Text style={{ fontWeight:'600', marginTop:16 }}>Job Address</Text>\n        <TextInput placeholder=\"Address line 1\" value={jobAddressLine1} onChangeText={setJobAddressLine1} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n        <TextInput placeholder=\"Address line 2\" value={jobAddressLine2} onChangeText={setJobAddressLine2} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n        <View style={{ flexDirection:'row', gap:8 }}>\n          <TextInput placeholder=\"City\" value={jobCity} onChangeText={setJobCity} style={{ flex:1, borderWidth:1, padding:8 }} />\n          <TextInput placeholder=\"State\" value={jobStateCode} onChangeText={setJobStateCode} style={{ width:80, borderWidth:1, padding:8 }} />\n          <TextInput placeholder=\"ZIP\" value={jobZip} onChangeText={setJobZip} style={{ width:100, borderWidth:1, padding:8 }} />\n        </View>\n        <View style={{ marginTop:12 }}>\n          <Button title=\"Save details\" onPress={saveJobDetails} />\n        </View>\n\n        {(user?.role==='ADMIN'||user?.role==='SUPERVISOR'||user?.role==='ESTIMATOR') && (\n          <View style={{ marginVertical:16 }}>\n            <Text style={{ fontWeight:'600' }}>New Change Order</Text>\n            <TextInput placeholder=\"Title\" value={title} onChangeText={setTitle} style={{ borderWidth:1, padding:8, marginVertical:6 }} />\n            <TextInput placeholder=\"Amount $\" value={amountDelta} onChangeText={setAmountDelta} keyboardType=\"decimal-pad\" style={{ borderWidth:1, padding:8, marginVertical:6 }} />\n            <Button title=\"Add Change Order\" onPress={addCO} />\n          </View>\n        )}\n        <Text style={{ fontWeight:'600', marginTop:12 }}>Change Orders</Text>\n        {changeOrders.length === 0 ? (\n          <Text style={{ marginVertical:6 }}>No change orders yet.</Text>\n        ) : changeOrders.map(item => (\n          <View key={item.id} style={{ borderWidth:1, padding:10, borderRadius:8, marginVertical:6 }}>\n            <Text style={{ fontWeight:'600' }}>{item.title}</Text>\n            <Text>Status: {item.status} | ${item.amountDelta}</Text>\n            {(user?.role==='ADMIN'||user?.role==='SUPERVISOR'||user?.role==='ESTIMATOR') && (\n              <View style={{ flexDirection:'row', gap:8, marginTop:8 }}>\n                <Button title=\"Approve\" onPress={async ()=>{ await api(`/change-orders/${item.id}`,'PATCH',{ status:'APPROVED' }, token); loadCO(); }} />\n                <Button title=\"Reject\" onPress={async ()=>{ await api(`/change-orders/${item.id}`,'PATCH',{ status:'REJECTED' }, token); loadCO(); }} />\n              </View>\n            )}\n          </View>\n        ))}\n\n        <Text style={{ fontWeight:'600', marginTop:16 }}>Tasks</Text>\n        <JobTasks jobId={jobId} />\n\n        <Text style={{ fontWeight:'600', marginTop:16 }}>Schedule</Text>\n        <JobSchedule jobId={jobId} />\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n\r\nfunction JobTasks({ jobId }){\r\n  const { token } = useAuth();\r\n  const [tasks, setTasks] = useState([]);\r\n  const [title, setTitle] = useState('');\r\n  const [dueDate, setDueDate] = useState('');\r\n  const load = async()=> {\r\n    try {\r\n      const data = await api(`/tasks?jobId=${jobId}`,'GET',null,token);\r\n      setTasks(data);\r\n      db.transaction(tx => {\r\n        tx.executeSql('DELETE FROM tasks_cache WHERE jobId=?', [jobId]);\r\n        data.forEach(t => tx.executeSql('INSERT OR REPLACE INTO tasks_cache (id, jobId, title, status, dueDate) VALUES (?,?,?,?,?)', [t.id, jobId, t.title||'', t.status||'TODO', t.dueDate||'']));\r\n      });\r\n    } catch(e) {\r\n      db.transaction(tx => tx.executeSql('SELECT id, jobId, title, status, dueDate FROM tasks_cache WHERE jobId=?', [jobId], (_, { rows }) => setTasks(rows._array || [])));\r\n    }\r\n  };\r\n  useEffect(()=>{ load(); },[]);\r\n  const add = async()=>{\r\n    if(!title.trim()) return Alert.alert('Title required');\r\n    await api('/tasks','POST',{ title, jobId, dueDate }, token);\r\n    setTitle(''); setDueDate(''); load();\r\n  };\r\n  const done = async(id)=>{ await api(`/tasks/${id}`,'PATCH',{ status:'DONE' }, token); load(); };\r\n  const remove = async(id)=>{ await api(`/tasks/${id}`,'DELETE',null,token); load(); };\r\n  return (\r\n    <View>\r\n      <View style={{ flexDirection:'row', gap:8, marginVertical:8 }}>\r\n        <TextInput placeholder=\"Task title\" value={title} onChangeText={setTitle} style={{ flex:1, borderWidth:1, padding:8 }} />\r\n        <TextInput placeholder=\"Due YYYY-MM-DD\" value={dueDate} onChangeText={setDueDate} style={{ width:140, borderWidth:1, padding:8 }} />\r\n        <Button title=\"Add\" onPress={add} />\r\n      </View>\r\n      {tasks.map(t => (\r\n        <View key={t.id} style={{ borderWidth:1, padding:10, borderRadius:8, marginVertical:6 }}>\r\n          <Text style={{ fontWeight:'600' }}>{t.title}</Text>\r\n          <Text>Due: {t.dueDate || '-'} | Status: {t.status}</Text>\r\n          <View style={{ flexDirection:'row', gap:8, marginTop:6 }}>\r\n            <Button title=\"Mark Done\" onPress={()=>done(t.id)} />\r\n            <Button title=\"Delete\" color=\"#c00\" onPress={()=>remove(t.id)} />\r\n          </View>\r\n        </View>\r\n      ))}\r\n    </View>\r\n  );\r\n}\r\n\r\nfunction JobSchedule({ jobId }){\r\n  const { token } = useAuth();\r\n  const [events, setEvents] = useState([]);\r\n  const [title, setTitle] = useState('');\r\n  const [startAt, setStartAt] = useState('');\r\n  const [endAt, setEndAt] = useState('');\r\n  const load = async()=> {\r\n    try {\r\n      const data = await api(`/calendar?jobId=${jobId}`,'GET',null,token);\r\n      setEvents(data);\r\n      db.transaction(tx => {\r\n        tx.executeSql('DELETE FROM calendar_cache WHERE jobId=?', [jobId]);\r\n        data.forEach(ev => tx.executeSql('INSERT OR REPLACE INTO calendar_cache (id, jobId, title, startAt, endAt) VALUES (?,?,?,?,?)', [ev.id, jobId, ev.title||'', ev.startAt||'', ev.endAt||'']));\r\n      });\r\n    } catch(e) {\r\n      db.transaction(tx => tx.executeSql('SELECT id, jobId, title, startAt, endAt FROM calendar_cache WHERE jobId=?', [jobId], (_, { rows }) => setEvents(rows._array || [])));\r\n    }\r\n  };\r\n  useEffect(()=>{ load(); },[]);\r\n  const add = async()=>{\r\n    if(!title.trim() || !startAt) return Alert.alert('Title and start time required');\r\n    await api('/calendar','POST',{ title, jobId, startAt, endAt }, token);\r\n    setTitle(''); setStartAt(''); setEndAt(''); load();\r\n  };\r\n  const remove = async(id)=>{ await api(`/calendar/${id}`,'DELETE',null,token); load(); };\r\n  return (\r\n    <View>\r\n      <View style={{ marginVertical:8 }}>\r\n        <TextInput placeholder=\"Event title\" value={title} onChangeText={setTitle} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\r\n        <TextInput placeholder=\"Start (YYYY-MM-DDTHH:mm:ssZ)\" value={startAt} onChangeText={setStartAt} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\r\n        <TextInput placeholder=\"End (YYYY-MM-DDTHH:mm:ssZ)\" value={endAt} onChangeText={setEndAt} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\r\n        <Button title=\"Add Event\" onPress={add} />\r\n      </View>\r\n      {events.map(ev => (\r\n        <View key={ev.id} style={{ borderWidth:1, padding:10, borderRadius:8, marginVertical:6 }}>\r\n          <Text style={{ fontWeight:'600' }}>{ev.title}</Text>\r\n          <Text>{ev.startAt} -> {ev.endAt || '-'}</Text>\r\n          <Button title=\"Delete\" color=\"#c00\" onPress={()=>remove(ev.id)} />\r\n        </View>\r\n      ))}\r\n    </View>\r\n  );\r\n}\r\n\r\n// ---------- Leads / Estimates (with photo queue) ----------\r\nasync function processQueue(token){\r\n  return new Promise(resolve => {\r\n    db.transaction(tx => {\r\n      tx.executeSql('SELECT * FROM queue', [], async (_, { rows }) => {\r\n        const items = rows._array || [];\r\n        for(const q of items){\r\n          try{\r\n            const payload = JSON.parse(q.payload);\r\n            if(q.type === 'createLead'){ await api('/leads', 'POST', payload, token); }\r\n            if(q.type === 'uploadPhoto'){ await api('/upload/image', 'POST', { dataUrl: payload.dataUrl }, token); }\r\n            db.transaction(txx => txx.executeSql('DELETE FROM queue WHERE id=?', [q.id]));\r\n          }catch(e){ /* keep for later */ }\r\n        }\r\n        resolve();\r\n      });\r\n    });\r\n  });\r\n}\r\n\r\nfunction LeadsScreen({ navigation }){\n  const { token } = useAuth();\n  const [leads, setLeads] = useState([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const fetchLeads = async () => {\n    try {\r\n      const data = await api('/leads', 'GET', null, token);\r\n      setLeads(data);\r\n      db.transaction(tx => {\r\n        tx.executeSql('DELETE FROM leads_cache;');\r\n        data.forEach(l => tx.executeSql('INSERT OR REPLACE INTO leads_cache (id, description, status) VALUES (?,?,?)', [l.id, l.description||'', l.status||'NEW']));\r\n      });\r\n    } catch(e){\r\n      db.transaction(tx => tx.executeSql('SELECT id, description, status FROM leads_cache', [], (_, { rows }) => setLeads(rows._array || [])));\r\n    }\n  };\n  useFocusEffect(useCallback(() => {\n    fetchLeads();\n  }, [token]));\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await fetchLeads();\n    setRefreshing(false);\n  };\n  return (\r\n    <SafeAreaView style={{ flex:1 }}>\r\n      <FlatList\r\n        data={leads}\r\n        keyExtractor={item => String(item.id)}\r\n        contentContainerStyle={{ padding:12 }}\n        refreshControl={<RefreshControl refreshing={refreshing} onRefresh={onRefresh} />}\n        renderItem={({ item }) => (\n          <TouchableOpacity style={{ padding:12, borderWidth:1, marginBottom:8 }} onPress={() => navigation.navigate('EstimateEditor', { leadId: item.id })}>\n            <Text style={{ fontWeight:'600' }}>Lead #{item.id}</Text>\n            <Text>Status: {item.status}</Text>\n            {item.Customer?.name ? <Text>Customer: {item.Customer.name}</Text> : null}\n            {item.Customer?.phone ? <Text>Phone: {item.Customer.phone}</Text> : null}\n            {item.Customer?.email ? <Text>Email: {item.Customer.email}</Text> : null}\n            <Text numberOfLines={3} style={{ marginTop:4 }}>{item.description || 'No description yet.'}</Text>\n            {item.Jobsite && (item.Jobsite.addressLine1 || item.Jobsite.city) ? (\n              <Text style={{ marginTop:4, color:'#555' }}>\n                {`${item.Jobsite.addressLine1 || ''}${item.Jobsite.addressLine2 ? `, ${item.Jobsite.addressLine2}` : ''}${item.Jobsite.city ? ` • ${item.Jobsite.city}${item.Jobsite.state ? `, ${item.Jobsite.state}` : ''}` : ''}${item.Jobsite.zip ? ` ${item.Jobsite.zip}` : ''}`}\n              </Text>\n            ) : null}\n          </TouchableOpacity>\n        )}\n        ListHeaderComponent={<Button title=\"New Lead\" onPress={()=>navigation.navigate('NewLead')} />}\n      />\n    </SafeAreaView>\n  );\r\n}\r\n\r\nfunction NewLeadScreen({ navigation }){\n  const { token } = useAuth();\n  const [description, setDescription] = useState('');\n  const [status, setStatus] = useState('NEW');\n  const [customerName, setCustomerName] = useState('');\n  const [customerPhone, setCustomerPhone] = useState('');\n  const [customerEmail, setCustomerEmail] = useState('');\n  const [addressLine1, setAddressLine1] = useState('');\n  const [addressLine2, setAddressLine2] = useState('');\n  const [city, setCity] = useState('');\n  const [stateCode, setStateCode] = useState('');\n  const [zip, setZip] = useState('');\n  const statuses = ['NEW','CONTACTED','ESTIMATING','CONVERTED','CLOSED_LOST'];\n\n  const buildPayload = () => {\n    const customer = [customerName, customerPhone, customerEmail].some(v => v && v.trim())\n      ? {\n          name: customerName.trim(),\n          phone: customerPhone.trim(),\n          email: customerEmail.trim(),\n        }\n      : null;\n    const jobsite = [addressLine1, addressLine2, city, stateCode, zip].some(v => v && v.trim())\n      ? {\n          addressLine1: addressLine1.trim(),\n          addressLine2: addressLine2.trim(),\n          city: city.trim(),\n          state: stateCode.trim(),\n          zip: zip.trim(),\n        }\n      : null;\n    return {\n      description,\n      status,\n      customer,\n      jobsite,\n    };\n  };\n\n  const createLeadOnline = async () => {\n    const payload = buildPayload();\n    const created = await api('/leads', 'POST', payload, token);\n    Alert.alert('Lead created', `Lead #${created.id} saved`, [\n      { text: 'View estimate', onPress: () => navigation.replace('EstimateEditor', { leadId: created.id }) },\n      { text: 'Back to leads', onPress: () => navigation.goBack() },\n    ]);\n  };\n\n  const queueLead = () => {\n    const payload = buildPayload();\n    db.transaction(tx => tx.executeSql('INSERT INTO queue (type, payload) VALUES (?,?)', ['createLead', JSON.stringify(payload)]));\n    Alert.alert('Saved offline', 'We will submit this lead when you reconnect.');\n    navigation.goBack();\n  };\n\n  const submit = async () => {\n    if(!description.trim()){\n      Alert.alert('Missing scope', 'Please describe the job or scope of work.');\n      return;\n    }\n    try {\n      await createLeadOnline();\n    } catch(e){\n      queueLead();\n    }\n  };\n\n  return (\n    <SafeAreaView style={{ flex:1 }}>\n      <ScrollView contentContainerStyle={{ padding:16, paddingBottom:32 }}>\n        <Text style={{ fontSize:18, marginBottom:8 }}>New Lead</Text>\n        <Text style={{ fontWeight:'600', marginBottom:6 }}>Scope / Notes</Text>\n        <TextInput\n          placeholder=\"Describe the job...\"\n          value={description}\n          onChangeText={setDescription}\n          multiline\n          style={{ borderWidth:1, minHeight:120, padding:10, marginBottom:12 }}\n        />\n        <Text style={{ fontWeight:'600', marginBottom:6 }}>Lead status</Text>\n        <View style={{ flexDirection:'row', flexWrap:'wrap', gap:8, marginBottom:12 }}>\n          {statuses.map(s => (\n            <TouchableOpacity\n              key={s}\n              onPress={()=>setStatus(s)}\n              style={{\n                paddingVertical:6,\n                paddingHorizontal:12,\n                borderRadius:16,\n                borderWidth:1,\n                borderColor: status===s ? '#007AFF' : '#ccc',\n                backgroundColor: status===s ? '#E6F0FF' : '#fff'\n              }}\n            >\n              <Text style={{ color: status===s ? '#007AFF' : '#333' }}>{s}</Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n\n        <Text style={{ fontWeight:'600', marginBottom:6 }}>Customer</Text>\n        <TextInput placeholder=\"Name\" value={customerName} onChangeText={setCustomerName} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n        <TextInput placeholder=\"Phone\" value={customerPhone} onChangeText={setCustomerPhone} keyboardType=\"phone-pad\" style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n        <TextInput placeholder=\"Email\" value={customerEmail} onChangeText={setCustomerEmail} keyboardType=\"email-address\" style={{ borderWidth:1, padding:8, marginBottom:12 }} />\n\n        <Text style={{ fontWeight:'600', marginBottom:6 }}>Job address</Text>\n        <TextInput placeholder=\"Address line 1\" value={addressLine1} onChangeText={setAddressLine1} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n        <TextInput placeholder=\"Address line 2\" value={addressLine2} onChangeText={setAddressLine2} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\n        <View style={{ flexDirection:'row', gap:8 }}>\n          <TextInput placeholder=\"City\" value={city} onChangeText={setCity} style={{ flex:1, borderWidth:1, padding:8 }} />\n          <TextInput placeholder=\"State\" value={stateCode} onChangeText={setStateCode} style={{ width:80, borderWidth:1, padding:8 }} />\n          <TextInput placeholder=\"ZIP\" value={zip} onChangeText={setZip} style={{ width:100, borderWidth:1, padding:8 }} />\n        </View>\n\n        <View style={{ marginTop:16 }}>\n          <Button title=\"Create Lead\" onPress={submit} />\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n}\n\r\nfunction EstimateEditorScreen({ route, navigation }){\r\n  const { token, user } = useAuth();\r\n  const { leadId } = route.params || {};\r\n  const [estimateId, setEstimateId] = useState(null);\r\n  const [items, setItems] = useState([]);\r\n  const [desc, setDesc] = useState('');\r\n  const [qty, setQty] = useState('1');\r\n  const [price, setPrice] = useState('0');\r\n  const [notes, setNotes] = useState('');\r\n  const [photoUrl, setPhotoUrl] = useState(null);\r\n  const [subtotal, setSubtotal] = useState(0);\r\n  const [taxRate, setTaxRate] = useState(7.0);\r\n  const [tax, setTax] = useState(0);\r\n  const [total, setTotal] = useState(0);\r\n\r\n  const createEstimate = async () => {\r\n    const est = await api('/estimates', 'POST', { leadId, subtotal:0, taxRate:7.0, total:0 }, token);\r\n    setEstimateId(est.id);\r\n  };\r\n\r\n  const addItem = async () => {\r\n    if(!estimateId){ alert('Create estimate first'); return; }\r\n    const data = await api(`/estimates/${estimateId}/items`, 'POST', { description: desc, qty: parseFloat(qty), unitPrice: parseFloat(price) }, token);\r\n    setItems(prev => [data, ...prev]); setDesc(''); setQty('1'); setPrice('0');\r\n  };\r\n\r\n  const suggest = async () => {\r\n    const r = await api('/ai/estimate-suggest', 'POST', { notes }, token);\r\n    if(!estimateId) await createEstimate();\r\n    for(const it of r.items){ await api(`/estimates/${estimateId}/items`, 'POST', it, token); }\r\n    Alert.alert('Added', 'Suggested line-items added');\r\n  };\r\n\r\n  const pickPhoto = async () => {\r\n    const res = await ImagePicker.launchImageLibraryAsync({ base64: true, quality: 0.6 });\r\n    if(!res.canceled && res.assets && res.assets[0].base64){\r\n      const dataUrl = `data:image/jpeg;base64,${res.assets[0].base64}`;\r\n      try {\r\n        const up = await api('/upload/image', 'POST', { dataUrl }, token);\r\n        setPhotoUrl(up.url);\r\n      } catch(e){\r\n        db.transaction(tx => tx.executeSql('INSERT INTO queue (type, payload) VALUES (?,?)', ['uploadPhoto', JSON.stringify({ dataUrl })]));\r\n        Alert.alert('Queued upload', 'Will send when online');\r\n      }\r\n    }\r\n  };\r\n\r\n  const approveAndSign = () => { if(!estimateId){ Alert.alert('Create estimate'); return; } navigation.navigate('Signature', { estimateId }); };\r\n\r\n  const canEstimate = user?.role === 'ADMIN' || user?.role === 'ESTIMATOR';\r\n\r\n  useEffect(()=>{\r\n    const s = items.reduce((acc, it) => acc + (parseFloat(it.qty||0) * parseFloat(it.unitPrice||0)), 0);\r\n    const t = s * (parseFloat(taxRate||0)/100);\r\n    setSubtotal(s);\r\n    setTax(t);\r\n    setTotal(s + t);\r\n  }, [items, taxRate]);\r\n\r\n  return (\r\n    <SafeAreaView style={{ flex:1, padding:16 }}>\r\n      <Text style={{ fontSize:18, marginBottom:8 }}>Estimate (Lead #{leadId})</Text>\r\n      {canEstimate ? <Button title={estimateId ? `Estimate #${estimateId}` : \"Create Estimate\"} onPress={createEstimate} /> : <Text>View only (insufficient role)</Text>}\r\n      <View style={{ height:12 }} />\r\n      <TextInput placeholder=\"Item description\" value={desc} onChangeText={setDesc} style={{ borderWidth:1, padding:8, marginBottom:6 }} />\r\n      <TextInput placeholder=\"Qty\" value={qty} onChangeText={setQty} keyboardType='decimal-pad' style={{ borderWidth:1, padding:8, marginBottom:6 }} />\r\n      <TextInput placeholder=\"Unit Price\" value={price} onChangeText={setPrice} keyboardType='decimal-pad' style={{ borderWidth:1, padding:8, marginBottom:6 }} />\r\n      {canEstimate && <Button title=\"Add Item\" onPress={addItem} />}\r\n      <View style={{ height:16 }} />\r\n      <Text style={{ fontWeight:'600' }}>AI helper</Text>\r\n      <TextInput placeholder=\"Paste field notes...\" value={notes} onChangeText={setNotes} multiline style={{ borderWidth:1, minHeight:80, padding:8, marginBottom:6 }} />\r\n      {canEstimate && <Button title=\"Suggest Line Items\" onPress={suggest} />}\r\n      <View style={{ height:16 }} />\r\n      <Text style={{ fontWeight:'600', marginBottom:6 }}>Totals</Text>\r\n      <View style={{ flexDirection:'row', justifyContent:'space-between', marginBottom:6 }}>\r\n        <Text>Subtotal</Text><Text>${subtotal.toFixed(2)}</Text>\r\n      </View>\r\n      <View style={{ flexDirection:'row', alignItems:'center', justifyContent:'space-between', marginBottom:6 }}>\r\n        <Text>Tax Rate (%)</Text>\r\n        <TextInput value={String(taxRate)} onChangeText={(v)=>setTaxRate(parseFloat(v)||0)} keyboardType='decimal-pad' style={{ borderWidth:1, padding:6, width:80, textAlign:'right' }} />\r\n      </View>\r\n      <View style={{ flexDirection:'row', justifyContent:'space-between', marginBottom:6 }}>\r\n        <Text>Tax</Text><Text>${tax.toFixed(2)}</Text>\r\n      </View>\r\n      <View style={{ flexDirection:'row', justifyContent:'space-between', marginBottom:12 }}>\r\n        <Text style={{ fontWeight:'700' }}>Total</Text><Text style={{ fontWeight:'700' }}>${total.toFixed(2)}</Text>\r\n      </View>\r\n      <View style={{ height:8 }} />\r\n      <Button title=\"Attach Photo\" onPress={pickPhoto} />\r\n      {photoUrl ? <Image source={{ uri: `${API_URL}${photoUrl}` }} style={{ height:120, marginTop:8 }} /> : null}\r\n      <View style={{ height:16 }} />\r\n      <Button title=\"Create Job from Estimate\" onPress={async ()=>{\r\n        try {\r\n          if(!estimateId) await createEstimate();\r\n          const job = await api('/jobs','POST',{ name: `Job for Estimate #${estimateId || 'NEW'}`, estimateId: estimateId, status:'SCHEDULED' }, token);\r\n          Alert.alert('Job Created', `Job #${job.id}`);\r\n        } catch(e){ Alert.alert('Error', e.message); }\r\n      }} />\r\n      <View style={{ height:8 }} />\r\n      <Button title=\"Approve & Sign\" onPress={approveAndSign} />\r\n      <View style={{ height:8 }} />\r\n      <Button title=\"Send Estimate\" onPress={async ()=>{\r\n        if(!estimateId) return Alert.alert('Create estimate first');\r\n        try { await api(`/estimates/${estimateId}/send`, 'POST', {}, token); Alert.alert('Sent', 'Estimate sent'); } catch(e){ Alert.alert('Error', e.message); }\r\n      }} />\r\n      <View style={{ height:8 }} />\r\n      <Button title=\"Download PDF\" onPress={async ()=>{\r\n        if(!estimateId) return Alert.alert('Create estimate first');\r\n        const fileUri = `${FileSystem.documentDirectory}estimate-${estimateId}.pdf`;\r\n        try {\r\n          await FileSystem.downloadAsync(`${API_URL}/pdf/estimate/${estimateId}`, fileUri, { headers: { Authorization: `Bearer ${token}` } });\r\n          Alert.alert('Saved', `PDF saved to:\\n${fileUri}`);\r\n        } catch (e) { Alert.alert('Error', e.message); }\r\n      }} />\r\n      <View style={{ height:16 }} />\r\n      <FlatList\r\n        data={items}\r\n        keyExtractor={(i, idx)=> String(i.id || idx)}\r\n        renderItem={({ item }) => (\r\n          <View style={{ padding:10, borderWidth:1, marginBottom:8 }}>\r\n            <Text style={{ fontWeight:'600' }}>{item.description}</Text>\r\n            <Text>Qty: {item.qty} Ã— ${item.unitPrice} = ${ (parseFloat(item.qty||0)*parseFloat(item.unitPrice||0)).toFixed(2) }</Text>\r\n          </View>\r\n        )}\r\n      />\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nfunction ScheduleScreen(){\r\n  const { token } = useAuth();\r\n  const [jobs, setJobs] = useState([]);\r\n  const [filter, setFilter] = useState('ALL'); // ALL | TODAY | WEEK\r\n  const [queueCount, setQueueCount] = useState(0);\r\n\r\n  const loadQueueCount = () => {\r\n    db.transaction(tx => tx.executeSql('SELECT COUNT(*) as c FROM queue', [], (_, { rows }) => setQueueCount((rows._array?.[0]?.c)||0)));\r\n  };\r\n\r\n  const load = async ()=> {\r\n    try {\r\n      const data = await api('/jobs','GET',null,token);\r\n      setJobs(data);\r\n      db.transaction(tx => {\n        tx.executeSql('DELETE FROM jobs_cache;');\n        data.forEach(j => tx.executeSql('INSERT OR REPLACE INTO jobs_cache (id, name, status, startDate, endDate, notes) VALUES (?,?,?,?,?,?)', [j.id, j.name||'', j.status||'SCHEDULED', j.startDate||'', j.endDate||'', j.notes||'']));\n      });\n    } catch(e) {\n      db.transaction(tx => tx.executeSql('SELECT id, name, status, startDate, endDate, notes FROM jobs_cache', [], (_, { rows }) => setJobs(rows._array || [])));\n    }\r\n  };\r\n\r\n  useEffect(()=>{ load(); loadQueueCount(); }, [token]);\r\n\r\n  const inRange = (d) => {\r\n    if (!d) return false;\r\n    const today = new Date();\r\n    const dt = new Date(d);\r\n    if (filter === 'TODAY') {\r\n      return dt.getFullYear()===today.getFullYear() && dt.getMonth()===today.getMonth() && dt.getDate()===today.getDate();\r\n    }\r\n    if (filter === 'WEEK') {\r\n      const start = new Date(today); start.setDate(today.getDate()-today.getDay());\r\n      const end = new Date(start); end.setDate(start.getDate()+6);\r\n      return dt >= start && dt <= end;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const filtered = jobs.filter(j => filter==='ALL' ? true : inRange(j.startDate));\r\n\r\n  return (\r\n    <SafeAreaView style={{ flex:1 }}>\r\n      <View style={{ padding:12, borderBottomWidth:1 }}>\r\n        <Text style={{ fontWeight:'700', marginBottom:6 }}>Schedule</Text>\r\n        <View style={{ flexDirection:'row', gap:8, marginBottom:8 }}>\r\n          <Button title=\"All\" onPress={()=>setFilter('ALL')} />\r\n          <Button title=\"Today\" onPress={()=>setFilter('TODAY')} />\r\n          <Button title=\"This Week\" onPress={()=>setFilter('WEEK')} />\r\n        </View>\r\n        <View style={{ flexDirection:'row', justifyContent:'space-between', alignItems:'center' }}>\r\n          <Text>Offline queue: {queueCount}</Text>\r\n          <Button title=\"Sync now\" onPress={async ()=>{ await processQueue(token); load(); loadQueueCount(); }} />\r\n        </View>\r\n      </View>\r\n      <FlatList\r\n        data={filtered}\r\n        keyExtractor={j=>String(j.id)}\r\n        contentContainerStyle={{ padding:12 }}\r\n        renderItem={({item})=> {\n          const jobsite = item.Jobsite;\n          const address = jobsite ? [\n            jobsite.addressLine1,\n            jobsite.addressLine2,\n            [jobsite.city, jobsite.state].filter(Boolean).join(', '),\n            jobsite.zip,\n          ].filter(Boolean).join(' • ') : '';\n          return (\n            <View style={{ borderWidth:1, padding:10, borderRadius:8, marginBottom:8 }}>\n              <Text style={{ fontWeight:'600' }}>{item.name || `Job #${item.id}`}</Text>\n              <Text>Status: {item.status}</Text>\n              <Text>Date: {item.startDate || '-'}{item.endDate ? ` → ${item.endDate}` : ''}</Text>\n              {address ? <Text style={{ color:'#555', marginTop:4 }}>{address}</Text> : null}\n              {item.notes ? <Text style={{ marginTop:4 }}>Notes: {item.notes}</Text> : null}\n            </View>\n          );\n        }}\n        ListEmptyComponent={<Text style={{ textAlign:'center', marginTop:20 }}>No jobs{filter!=='ALL' ? ' in range' : ''} - add one!</Text>}\r\n      />\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nfunction MeScreen({ navigation }){\r\n  const { setToken, user } = useAuth();\r\n  return (\r\n    <SafeAreaView style={{ flex:1, padding:16 }}>\r\n      <Text style={{ fontSize:20, fontWeight:'600' }}>PrecisionTracker</Text>\r\n      <Text>User: {user?.email} ({user?.role})</Text>\r\n      {user?.role==='ADMIN' && <View style={{ height:12 }} />}\r\n      {user?.role==='ADMIN' && <Button title=\"Manage Users\" onPress={()=>navigation.navigate('UsersAdmin')} />}\r\n      <View style={{ height:20 }} />\r\n      <Button title=\"Sign out\" onPress={()=>setToken(null)} />\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nconst Stack = createNativeStackNavigator();\r\nconst Tabs = createBottomTabNavigator();\r\n\r\nfunction TabsNav(){\r\n  return (\r\n    <Tabs.Navigator>\r\n      <Tabs.Screen name=\"Leads\" component={LeadsScreen} />\r\n      <Tabs.Screen name=\"Jobs\" component={JobsKanbanScreen} options={{ title:'Jobs' }} />\r\n      <Tabs.Screen name=\"Schedule\" component={ScheduleScreen} />\r\n      <Tabs.Screen name=\"Me\" component={MeScreen} />\r\n    </Tabs.Navigator>\r\n  );\r\n}\r\n\r\nfunction LoginScreen() {\r\n  const [email, setEmail] = useState('admin@example.com');\r\n  // If you kept the hardcoded backend login, default to test123:\r\n  const [password, setPassword] = useState('test123');\r\n  const [busy, setBusy] = useState(false);\r\n\r\n  // <-- use the auth context to flip the app into \"logged-in\" mode\r\n  const { setToken, setUser } = useAuth();\r\n\r\n  async function login() {\r\n    try {\r\n      setBusy(true);\r\n      const res = await fetch(`${API_URL}/auth/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data?.message || data?.error || 'Login failed');\r\n\r\n      // Accept dev or real payload shape\r\n      const tok = data.token || data.accessToken;\r\n      if (!tok) throw new Error('No token returned from server');\r\n\r\n      // â¬‡ï¸ This is the key: store token/user in global auth state\r\n      // Store token/user in global auth state + persist\r\n      const normalizedUser = data.user ? { ...data.user, role: normalizeRole(data.user.role) } : { email, role: 'ADMIN', name: 'Admin' };\r\n      setToken(tok);\r\n      setUser(normalizedUser);\r\n      try {\r\n        await SecureStore.setItemAsync('auth_token', tok);\r\n        await SecureStore.setItemAsync('auth_user', JSON.stringify(normalizedUser));\r\n      } catch {}\r\n\r\n      // Optional: toast\r\n      Alert.alert('Welcome', 'Logged in');\r\n    } catch (e) {\r\n      Alert.alert('Error', e.message);\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <View style={{ flex: 1, padding: 20, justifyContent: 'center' }}>\r\n      <Text style={{ fontSize: 24, marginBottom: 16 }}>PrecisionTracker</Text>\r\n      <TextInput\r\n        placeholder=\"Email\"\r\n        autoCapitalize=\"none\"\r\n        value={email}\r\n        onChangeText={setEmail}\r\n        style={{ borderWidth: 1, padding: 12, marginBottom: 12 }}\r\n      />\r\n      <TextInput\r\n        placeholder=\"Password\"\r\n        secureTextEntry\r\n        value={password}\r\n        onChangeText={setPassword}\r\n        style={{ borderWidth: 1, padding: 12, marginBottom: 12 }}\r\n      />\r\n      <Button title={busy ? 'Signing in...' : 'Sign in'} onPress={login} disabled={busy} />\r\n    </View>\r\n  );\r\n}\r\n\r\n\r\nexport default function App(){\r\n  const [token, setToken] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n  const [booting, setBooting] = useState(true);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const [tok, usr] = await Promise.all([\r\n          SecureStore.getItemAsync('auth_token'),\r\n          SecureStore.getItemAsync('auth_user')\r\n        ]);\r\n        if (mounted && tok) {\r\n          setToken(tok);\r\n          if (usr) {\r\n            const parsed = JSON.parse(usr);\r\n            parsed.role = normalizeRole(parsed.role);\r\n            setUser(parsed);\r\n          }\r\n        }\r\n      } catch {}\r\n      finally { if (mounted) setBooting(false); }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  const authValue = {\r\n    token,\r\n    setToken: (t) => {\r\n      setToken(t);\r\n      if (!t) { try { SecureStore.deleteItemAsync('auth_token'); SecureStore.deleteItemAsync('auth_user'); } catch {} }\r\n    },\r\n    user,\r\n    setUser\r\n  };\r\n\r\n  if (booting) {\r\n    return (\r\n      <SafeAreaView style={{ flex:1, alignItems:'center', justifyContent:'center' }}>\r\n        <Text>Loadingâ€¦</Text>\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={authValue}>\r\n      <NavigationContainer>\r\n        {!token ? (\r\n          <Stack.Navigator>\r\n            <Stack.Screen name=\"Login\" component={LoginScreen} />\r\n          </Stack.Navigator>\r\n        ) : (\r\n          <Stack.Navigator>\r\n            <Stack.Screen name=\"Tabs\" component={TabsNav} options={{ headerShown:false }} />\r\n            <Stack.Screen name=\"NewLead\" component={NewLeadScreen} options={{ title:'New Lead' }} />\r\n            <Stack.Screen name=\"EstimateEditor\" component={EstimateEditorScreen} options={{ title:'Estimate' }} />\r\n            <Stack.Screen name=\"Signature\" component={SignatureScreen} options={{ title:'Signature' }} />\r\n            <Stack.Screen name=\"UsersAdmin\" component={UsersAdminScreen} options={{ title:'Users (Admin)' }} />\r\n            <Stack.Screen name=\"JobDetail\" component={JobDetailScreen} options={{ title:'Job' }} />\r\n          </Stack.Navigator>\r\n        )}\r\n      </NavigationContainer>\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}